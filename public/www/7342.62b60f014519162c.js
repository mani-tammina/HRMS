"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7342],{7342:(q,f,d)=>{d.r(f),d.d(f,{ProjectDetailPage:()=>J});var _=d(467),h=d(177),s=d(4341),a=d(7820),F=d(2951),p=d(5873),P=d(6233),e=d(4438),g=d(3799),E=d(7326),k=d(6437),v=d(6119);const u=(o,l)=>l.id;function C(o,l){if(1&o){const t=e.RV6();e.j41(0,"ion-button",5),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.showEditModal=!0)}),e.nrm(1,"ion-icon",6),e.k0s(),e.j41(2,"ion-button",7),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.deleteProject())}),e.nrm(3,"ion-icon",8),e.k0s()}}function D(o,l){1&o&&e.nrm(0,"app-loading",3)}function b(o,l){if(1&o){const t=e.RV6();e.j41(0,"ion-card")(1,"ion-card-content")(2,"div",9),e.nrm(3,"ion-icon",10),e.j41(4,"p"),e.EFF(5,"Create a new project"),e.k0s(),e.j41(6,"ion-button",5),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.showEditModal=!0)}),e.nrm(7,"ion-icon",11),e.EFF(8," Create Project "),e.k0s()()()()}}function y(o,l){if(1&o&&(e.j41(0,"ion-item")(1,"ion-label")(2,"h3"),e.EFF(3,"Description"),e.k0s(),e.j41(4,"p"),e.EFF(5),e.k0s()()()),2&o){const t=e.XpG(3);e.R7$(5),e.JRh(t.project.description)}}function x(o,l){if(1&o&&(e.j41(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),e.EFF(3),e.k0s()(),e.j41(4,"ion-card-content")(5,"ion-list")(6,"ion-item")(7,"ion-label")(8,"h3"),e.EFF(9,"Project Code"),e.k0s(),e.j41(10,"p"),e.EFF(11),e.k0s()()(),e.j41(12,"ion-item")(13,"ion-label")(14,"h3"),e.EFF(15,"Client"),e.k0s(),e.j41(16,"p"),e.EFF(17),e.k0s()()(),e.j41(18,"ion-item")(19,"ion-label")(20,"h3"),e.EFF(21,"Status"),e.k0s(),e.j41(22,"p")(23,"ion-badge",16),e.EFF(24),e.k0s()()()(),e.j41(25,"ion-item")(26,"ion-label")(27,"h3"),e.EFF(28,"Duration"),e.k0s(),e.j41(29,"p"),e.EFF(30),e.k0s()()(),e.DNE(31,y,6,1,"ion-item"),e.k0s()()()),2&o){const t=e.XpG(2);e.R7$(3),e.JRh(t.project.project_name),e.R7$(8),e.JRh(t.project.project_code),e.R7$(6),e.JRh(t.project.client_name),e.R7$(6),e.Y8G("color",t.getStatusColor(t.project.status)),e.R7$(),e.JRh(t.getStatusLabel(t.project.status)),e.R7$(6),e.Lme("",t.formatDate(t.project.start_date)," - ",t.formatDate(t.project.end_date),""),e.R7$(),e.vxM(t.project.description?31:-1)}}function M(o,l){if(1&o&&(e.j41(0,"ion-item")(1,"ion-label")(2,"h3"),e.EFF(3),e.k0s(),e.j41(4,"p"),e.EFF(5),e.k0s(),e.j41(6,"p")(7,"ion-badge"),e.EFF(8),e.k0s()()()()),2&o){const t=l.$implicit;e.R7$(3),e.JRh(t.shift_name),e.R7$(2),e.E5c("",t.start_time," - ",t.end_time," (",t.timezone,")"),e.R7$(3),e.JRh(t.shift_type)}}function R(o,l){if(1&o&&(e.j41(0,"ion-list"),e.Z7z(1,M,9,5,"ion-item",null,u),e.k0s()),2&o){const t=e.XpG(3);e.R7$(),e.Dyx(t.project.shifts)}}function T(o,l){if(1&o){const t=e.RV6();e.j41(0,"div",9)(1,"p"),e.EFF(2,"No shifts configured"),e.k0s(),e.j41(3,"ion-button",17),e.bIt("click",function(){e.eBV(t);const n=e.XpG(3);return e.Njj(n.showShiftModal=!0)}),e.nrm(4,"ion-icon",11),e.EFF(5," Add First Shift "),e.k0s()()}}function I(o,l){if(1&o){const t=e.RV6();e.j41(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),e.EFF(3," Project Shifts "),e.j41(4,"ion-button",17),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.showShiftModal=!0)}),e.nrm(5,"ion-icon",11),e.EFF(6," Add Shift "),e.k0s()()(),e.j41(7,"ion-card-content"),e.DNE(8,R,3,0,"ion-list")(9,T,6,0,"div",9),e.k0s()()}if(2&o){const t=e.XpG(2);e.R7$(8),e.vxM(t.project.shifts&&t.project.shifts.length>0?8:9)}}function S(o,l){if(1&o&&(e.j41(0,"ion-item")(1,"ion-label")(2,"h3"),e.EFF(3),e.k0s(),e.j41(4,"p"),e.EFF(5),e.k0s(),e.j41(6,"p"),e.EFF(7),e.k0s(),e.j41(8,"p"),e.EFF(9),e.k0s()()()),2&o){const t=l.$implicit,i=e.XpG(4);e.R7$(3),e.JRh(t.employee_name||"Unknown"),e.R7$(2),e.JRh(t.role_in_project),e.R7$(2),e.SpI("Allocation: ",t.allocation_percentage,"%"),e.R7$(2),e.Lme("",i.formatDate(t.assignment_start_date)," - ",i.formatDate(t.assignment_end_date),"")}}function O(o,l){if(1&o&&(e.j41(0,"ion-list"),e.Z7z(1,S,10,5,"ion-item",null,u),e.k0s()),2&o){const t=e.XpG(3);e.R7$(),e.Dyx(t.project.assignments)}}function N(o,l){if(1&o){const t=e.RV6();e.j41(0,"div",9)(1,"p"),e.EFF(2,"No team members assigned"),e.k0s(),e.j41(3,"ion-button",17),e.bIt("click",function(){e.eBV(t);const n=e.XpG(3);return e.Njj(n.showAssignModal=!0)}),e.nrm(4,"ion-icon",18),e.EFF(5," Assign First Employee "),e.k0s()()}}function A(o,l){if(1&o){const t=e.RV6();e.j41(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),e.EFF(3," Team Members "),e.j41(4,"ion-button",17),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.showAssignModal=!0)}),e.nrm(5,"ion-icon",18),e.EFF(6," Assign Employee "),e.k0s()()(),e.j41(7,"ion-card-content"),e.DNE(8,O,3,0,"ion-list")(9,N,6,0,"div",9),e.k0s()()}if(2&o){const t=e.XpG(2);e.R7$(8),e.vxM(t.project.assignments&&t.project.assignments.length>0?8:9)}}function $(o,l){if(1&o){const t=e.RV6();e.j41(0,"ion-segment",12),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG();return e.DH7(r.selectedSegment,n)||(r.selectedSegment=n),e.Njj(n)}),e.j41(1,"ion-segment-button",13)(2,"ion-label"),e.EFF(3,"Details"),e.k0s()(),e.j41(4,"ion-segment-button",14)(5,"ion-label"),e.EFF(6,"Shifts"),e.k0s()(),e.j41(7,"ion-segment-button",15)(8,"ion-label"),e.EFF(9,"Team"),e.k0s()()(),e.DNE(10,x,32,8,"ion-card")(11,I,10,1,"ion-card")(12,A,10,1,"ion-card")}if(2&o){const t=e.XpG();e.R50("ngModel",t.selectedSegment),e.R7$(10),e.vxM("details"===t.selectedSegment?10:-1),e.R7$(),e.vxM("shifts"===t.selectedSegment?11:-1),e.R7$(),e.vxM("team"===t.selectedSegment?12:-1)}}function G(o,l){1&o&&(e.j41(0,"ion-note",22),e.EFF(1,"Project code is required"),e.k0s())}function X(o,l){1&o&&(e.j41(0,"ion-note",22),e.EFF(1,"Project name is required"),e.k0s())}function V(o,l){1&o&&(e.j41(0,"ion-note",22),e.EFF(1,"Client name is required"),e.k0s())}function B(o,l){1&o&&(e.j41(0,"ion-note",22),e.EFF(1,"Start date is required"),e.k0s())}function w(o,l){if(1&o){const t=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3),e.k0s(),e.j41(4,"ion-buttons",2)(5,"ion-button",5),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.showEditModal=!1)}),e.EFF(6,"Close"),e.k0s()()()(),e.j41(7,"ion-content")(8,"form",19)(9,"ion-list")(10,"ion-item")(11,"ion-label",20),e.EFF(12,"Project Code *"),e.k0s(),e.nrm(13,"ion-input",21),e.DNE(14,G,2,0,"ion-note",22),e.k0s(),e.j41(15,"ion-item")(16,"ion-label",20),e.EFF(17,"Project Name *"),e.k0s(),e.nrm(18,"ion-input",23),e.DNE(19,X,2,0,"ion-note",22),e.k0s(),e.j41(20,"ion-item")(21,"ion-label",20),e.EFF(22,"Client Name *"),e.k0s(),e.nrm(23,"ion-input",24),e.DNE(24,V,2,0,"ion-note",22),e.k0s(),e.j41(25,"ion-item")(26,"ion-label",20),e.EFF(27,"Status *"),e.k0s(),e.j41(28,"ion-select",25)(29,"ion-select-option",26),e.EFF(30,"Active"),e.k0s(),e.j41(31,"ion-select-option",27),e.EFF(32,"Completed"),e.k0s(),e.j41(33,"ion-select-option",28),e.EFF(34,"On Hold"),e.k0s(),e.j41(35,"ion-select-option",29),e.EFF(36,"Cancelled"),e.k0s()()(),e.j41(37,"ion-item")(38,"ion-label",20),e.EFF(39,"Start Date *"),e.k0s(),e.nrm(40,"ion-input",30),e.DNE(41,B,2,0,"ion-note",22),e.k0s(),e.j41(42,"ion-item")(43,"ion-label",20),e.EFF(44,"End Date"),e.k0s(),e.nrm(45,"ion-input",31),e.k0s(),e.j41(46,"ion-item")(47,"ion-label",20),e.EFF(48,"Description"),e.k0s(),e.nrm(49,"ion-textarea",32),e.k0s()(),e.j41(50,"div",33)(51,"ion-button",34),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.saveProject())}),e.nrm(52,"ion-icon",35),e.EFF(53," Save Project "),e.k0s()()()()}if(2&o){const t=e.XpG();e.R7$(3),e.JRh(t.projectId?"Edit Project":"New Project"),e.R7$(5),e.Y8G("formGroup",t.projectForm),e.R7$(5),e.AVh("ion-invalid",t.isFieldInvalid("project","project_code"))("ion-valid",t.isFieldValid("project","project_code")),e.R7$(),e.vxM(t.isFieldInvalid("project","project_code")?14:-1),e.R7$(4),e.AVh("ion-invalid",t.isFieldInvalid("project","project_name"))("ion-valid",t.isFieldValid("project","project_name")),e.R7$(),e.vxM(t.isFieldInvalid("project","project_name")?19:-1),e.R7$(4),e.AVh("ion-invalid",t.isFieldInvalid("project","client_name"))("ion-valid",t.isFieldValid("project","client_name")),e.R7$(),e.vxM(t.isFieldInvalid("project","client_name")?24:-1),e.R7$(16),e.AVh("ion-invalid",t.isFieldInvalid("project","start_date"))("ion-valid",t.isFieldValid("project","start_date")),e.R7$(),e.vxM(t.isFieldInvalid("project","start_date")?41:-1),e.R7$(10),e.Y8G("disabled",!t.projectForm||t.projectForm.invalid)}}function U(o,l){if(1&o){const t=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Add Shift"),e.k0s(),e.j41(4,"ion-buttons",2)(5,"ion-button",5),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.showShiftModal=!1)}),e.EFF(6,"Close"),e.k0s()()()(),e.j41(7,"ion-content")(8,"form",19)(9,"ion-list")(10,"ion-item")(11,"ion-label",20),e.EFF(12,"Shift Name *"),e.k0s(),e.nrm(13,"ion-input",36),e.k0s(),e.j41(14,"ion-item")(15,"ion-label",20),e.EFF(16,"Shift Type *"),e.k0s(),e.j41(17,"ion-select",37)(18,"ion-select-option",38),e.EFF(19,"Day"),e.k0s(),e.j41(20,"ion-select-option",39),e.EFF(21,"Night"),e.k0s(),e.j41(22,"ion-select-option",40),e.EFF(23,"Flexible"),e.k0s()()(),e.j41(24,"ion-item")(25,"ion-label",20),e.EFF(26,"Start Time *"),e.k0s(),e.nrm(27,"ion-input",41),e.k0s(),e.j41(28,"ion-item")(29,"ion-label",20),e.EFF(30,"End Time *"),e.k0s(),e.nrm(31,"ion-input",42),e.k0s(),e.j41(32,"ion-item")(33,"ion-label",20),e.EFF(34,"Timezone *"),e.k0s(),e.nrm(35,"ion-input",43),e.k0s()(),e.j41(36,"div",33)(37,"ion-button",44),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.saveShift())}),e.nrm(38,"ion-icon",35),e.EFF(39," Add Shift "),e.k0s()()()()}if(2&o){const t=e.XpG();e.R7$(8),e.Y8G("formGroup",t.shiftForm)}}function L(o,l){if(1&o&&(e.j41(0,"ion-select-option",46),e.EFF(1),e.k0s()),2&o){const t=l.$implicit;e.Y8G("value",t.id),e.R7$(),e.Lme(" ",t.name," (",t.email,") ")}}function H(o,l){if(1&o&&(e.j41(0,"ion-select-option",46),e.EFF(1),e.k0s()),2&o){const t=l.$implicit;e.Y8G("value",t.id),e.R7$(),e.E5c(" ",t.shift_name," (",t.start_time," - ",t.end_time,") ")}}function W(o,l){if(1&o&&(e.j41(0,"ion-item")(1,"ion-label",20),e.EFF(2,"Shift"),e.k0s(),e.j41(3,"ion-select",51),e.Z7z(4,H,2,4,"ion-select-option",46,u),e.k0s()()),2&o){const t=e.XpG(2);e.R7$(4),e.Dyx(null==t.project?null:t.project.shifts)}}function z(o,l){if(1&o){const t=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Assign Employee"),e.k0s(),e.j41(4,"ion-buttons",2)(5,"ion-button",5),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.showAssignModal=!1)}),e.EFF(6,"Close"),e.k0s()()()(),e.j41(7,"ion-content")(8,"form",19)(9,"ion-list")(10,"ion-item")(11,"ion-label",20),e.EFF(12,"Employee *"),e.k0s(),e.j41(13,"ion-select",45),e.Z7z(14,L,2,3,"ion-select-option",46,u),e.k0s()(),e.j41(16,"ion-item")(17,"ion-label",20),e.EFF(18,"Role in Project *"),e.k0s(),e.nrm(19,"ion-input",47),e.k0s(),e.j41(20,"ion-item")(21,"ion-label",20),e.EFF(22,"Allocation Percentage *"),e.k0s(),e.nrm(23,"ion-input",48),e.k0s(),e.DNE(24,W,6,0,"ion-item"),e.j41(25,"ion-item")(26,"ion-label",20),e.EFF(27,"Assignment Start Date *"),e.k0s(),e.nrm(28,"ion-input",49),e.k0s(),e.j41(29,"ion-item")(30,"ion-label",20),e.EFF(31,"Assignment End Date"),e.k0s(),e.nrm(32,"ion-input",50),e.k0s()(),e.j41(33,"div",33)(34,"ion-button",44),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.assignEmployee())}),e.nrm(35,"ion-icon",18),e.EFF(36," Assign Employee "),e.k0s()()()()}if(2&o){const t=e.XpG();e.R7$(8),e.Y8G("formGroup",t.assignForm),e.R7$(6),e.Dyx(t.employees),e.R7$(10),e.vxM(null!=t.project&&t.project.shifts&&((null==t.project||null==t.project.shifts?null:t.project.shifts.length)||0)>0?24:-1)}}let J=(()=>{class o{constructor(t,i,n,r,c,m,j,K){this.route=t,this.router=i,this.fb=n,this.projectsService=r,this.employeeService=c,this.errorHandler=m,this.alertController=j,this.loadingController=K,this.projectId=null,this.project=null,this.isLoading=!1,this.selectedSegment="details",this.showEditModal=!1,this.showShiftModal=!1,this.showAssignModal=!1,this.employees=[],this.editingShift=null,(0,F.d)({saveOutline:p.oc8,trashOutline:p.P1A,addOutline:p.EKF,peopleOutline:p.wx_,timeOutline:p.CVk,createOutline:p.hmR,personAddOutline:p.zsU}),this.initForms()}ngOnInit(){const t=this.route.snapshot.paramMap.get("id");t&&"new"!==t?(this.projectId=parseInt(t),this.loadProject()):(this.initNewProject(),setTimeout(()=>{this.showEditModal=!0},100)),this.loadEmployees()}initForms(){this.projectForm=this.fb.group({project_code:["",s.k0.required],project_name:["",s.k0.required],client_name:["",s.k0.required],start_date:["",s.k0.required],end_date:[""],status:["active",s.k0.required],description:[""]}),this.shiftForm=this.fb.group({shift_type:["day",s.k0.required],shift_name:["",s.k0.required],start_time:["09:00",s.k0.required],end_time:["18:00",s.k0.required],timezone:["UTC",s.k0.required]}),this.assignForm=this.fb.group({employee_id:["",s.k0.required],role_in_project:["",s.k0.required],allocation_percentage:[100,[s.k0.required,s.k0.min(0),s.k0.max(100)]],shift_id:[""],assignment_start_date:["",s.k0.required],assignment_end_date:[""]})}loadProject(){var i,t=this;this.projectId&&(this.isLoading=!0,this.projectsService.getProjectById(this.projectId).subscribe({next:i=>{this.project=i.project,this.projectForm.patchValue(this.project),this.isLoading=!1},error:(i=(0,_.A)(function*(n){yield t.errorHandler.handleError(n,"Failed to load project"),t.isLoading=!1}),function(r){return i.apply(this,arguments)})}))}loadEmployees(){this.employeeService.getEmployees().subscribe({next:t=>{this.employees=t.filter(i=>"Working"===i.EmploymentStatus)},error:t=>console.error("Error loading employees:",t)})}initNewProject(){this.project=null,this.projectId=null,this.projectForm.reset({status:"active",start_date:(new Date).toISOString().split("T")[0]})}getStatusLabel(t){return{active:"Active",completed:"Completed",on_hold:"On Hold",cancelled:"Cancelled"}[t]||t}isFieldInvalid(t,i){const r=("project"===t?this.projectForm:"shift"===t?this.shiftForm:this.assignForm)?.get(i);return!!(r&&r.invalid&&r.touched)}isFieldValid(t,i){const r=("project"===t?this.projectForm:"shift"===t?this.shiftForm:this.assignForm)?.get(i);return!!(r&&r.valid&&r.touched)}saveProject(){var t=this;return(0,_.A)(function*(){if(console.log("Save project called"),console.log("Form valid:",t.projectForm?.valid),console.log("Form value:",t.projectForm?.value),console.log("Form errors:",t.projectForm?.errors),!t.projectForm||t.projectForm.invalid)return console.log("Form is invalid or not initialized"),t.projectForm&&Object.keys(t.projectForm.controls).forEach(c=>{t.projectForm.get(c)?.markAsTouched()}),void(yield t.errorHandler.handleWarning("Please fill all required fields"));const i=yield t.loadingController.create({message:"Saving project..."});yield i.present();const n=t.projectForm.value;var c;console.log("Sending project data:",n),(t.projectId?t.projectsService.updateProject(t.projectId,n):t.projectsService.createProject(n)).subscribe({next:(c=(0,_.A)(function*(m){console.log("Project saved successfully:",m),yield i.dismiss(),yield t.errorHandler.handleSuccess(m.message),!t.projectId&&m.project?t.router.navigate(["/admin/projects",m.project.id]):(t.showEditModal=!1,t.loadProject())}),function(j){return c.apply(this,arguments)}),error:function(){var c=(0,_.A)(function*(m){console.error("Error saving project:",m),yield i.dismiss(),yield t.errorHandler.handleError(m,"Failed to save project")});return function(j){return c.apply(this,arguments)}}()})})()}saveShift(){var t=this;return(0,_.A)(function*(){if(t.shiftForm.invalid||!t.projectId)return void(yield t.errorHandler.handleWarning("Please fill all required fields"));const i=yield t.loadingController.create({message:"Saving shift..."});var n;yield i.present(),t.projectsService.addShift(t.projectId,t.shiftForm.value).subscribe({next:(n=(0,_.A)(function*(r){yield i.dismiss(),yield t.errorHandler.handleSuccess(r.message),t.showShiftModal=!1,t.shiftForm.reset({shift_type:"day",start_time:"09:00",end_time:"18:00",timezone:"UTC"}),t.loadProject()}),function(c){return n.apply(this,arguments)}),error:function(){var n=(0,_.A)(function*(r){yield i.dismiss(),yield t.errorHandler.handleError(r,"Failed to save shift")});return function(c){return n.apply(this,arguments)}}()})})()}assignEmployee(){var t=this;return(0,_.A)(function*(){if(t.assignForm.invalid||!t.projectId)return void(yield t.errorHandler.handleWarning("Please fill all required fields"));const i=yield t.loadingController.create({message:"Assigning employee..."});yield i.present();const n={...t.assignForm.value,project_id:t.projectId};var r;t.projectsService.assignEmployee(n).subscribe({next:(r=(0,_.A)(function*(c){yield i.dismiss(),yield t.errorHandler.handleSuccess(c.message),t.showAssignModal=!1,t.assignForm.reset({allocation_percentage:100}),t.loadProject()}),function(m){return r.apply(this,arguments)}),error:function(){var r=(0,_.A)(function*(c){yield i.dismiss(),yield t.errorHandler.handleError(c,"Failed to assign employee")});return function(m){return r.apply(this,arguments)}}()})})()}deleteProject(){var t=this;return(0,_.A)(function*(){t.projectId&&(yield(yield t.alertController.create({header:"Confirm Delete",message:"Are you sure you want to delete this project? This action cannot be undone.",buttons:[{text:"Cancel",role:"cancel"},{text:"Delete",role:"destructive",handler:()=>t.confirmDelete()}]})).present())})()}confirmDelete(){var t=this;return(0,_.A)(function*(){if(!t.projectId)return;const i=yield t.loadingController.create({message:"Deleting project..."});var n;yield i.present(),t.projectsService.deleteProject(t.projectId).subscribe({next:(n=(0,_.A)(function*(r){yield i.dismiss(),yield t.errorHandler.handleSuccess(r.message),t.router.navigate(["/admin/projects"])}),function(c){return n.apply(this,arguments)}),error:function(){var n=(0,_.A)(function*(r){yield i.dismiss(),yield t.errorHandler.handleError(r,"Failed to delete project")});return function(c){return n.apply(this,arguments)}}()})})()}getStatusColor(t){return{active:"success",completed:"primary",on_hold:"warning",cancelled:"danger"}[t]||"medium"}formatDate(t){return t?new Date(t).toLocaleDateString():"Ongoing"}static{this.\u0275fac=function(i){return new(i||o)(e.rXU(g.nX),e.rXU(g.Ix),e.rXU(s.ok),e.rXU(E.i),e.rXU(k.O),e.rXU(v.c),e.rXU(a.hG),e.rXU(a.Xi))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-project-detail"]],standalone:!0,features:[e.aNF],decls:18,vars:6,consts:[["slot","start"],["defaultHref","/admin/projects"],["slot","end"],["type","spinner"],[3,"didDismiss","isOpen"],[3,"click"],["name","create-outline","slot","icon-only"],["color","danger",3,"click"],["name","trash-outline","slot","icon-only"],[1,"empty-state"],["name","briefcase-outline",2,"font-size","64px","color","var(--ion-color-medium)"],["name","add-outline","slot","start"],[3,"ngModelChange","ngModel"],["value","details"],["value","shifts"],["value","team"],[3,"color"],["size","small",3,"click"],["name","person-add-outline","slot","start"],[3,"formGroup"],["position","stacked"],["type","text","formControlName","project_code","placeholder","e.g., PRJ-001"],["slot","error"],["type","text","formControlName","project_name","placeholder","Enter project name"],["type","text","formControlName","client_name","placeholder","Enter client name"],["formControlName","status"],["value","active"],["value","completed"],["value","on_hold"],["value","cancelled"],["type","date","formControlName","start_date"],["type","date","formControlName","end_date"],["formControlName","description","rows","4","placeholder","Project description"],[2,"padding","16px"],["expand","block",3,"click","disabled"],["name","save-outline","slot","start"],["type","text","formControlName","shift_name","placeholder","e.g., Morning Shift"],["formControlName","shift_type"],["value","day"],["value","night"],["value","flexible"],["type","time","formControlName","start_time"],["type","time","formControlName","end_time"],["type","text","formControlName","timezone","placeholder","e.g., UTC, IST"],["expand","block",3,"click"],["formControlName","employee_id","placeholder","Select Employee"],[3,"value"],["type","text","formControlName","role_in_project","placeholder","e.g., Developer, Designer"],["type","number","formControlName","allocation_percentage","min","0","max","100","placeholder","0-100"],["type","date","formControlName","assignment_start_date"],["type","date","formControlName","assignment_end_date"],["formControlName","shift_id","placeholder","Select Shift (Optional)"]],template:function(i,n){1&i&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),e.nrm(3,"ion-back-button",1),e.k0s(),e.j41(4,"ion-title"),e.EFF(5),e.k0s(),e.j41(6,"ion-buttons",2),e.DNE(7,C,4,0),e.k0s()()(),e.j41(8,"ion-content"),e.DNE(9,D,1,0,"app-loading",3)(10,b,9,0,"ion-card")(11,$,13,4),e.j41(12,"ion-modal",4),e.bIt("didDismiss",function(){return n.showEditModal=!1}),e.DNE(13,w,54,23,"ng-template"),e.k0s(),e.j41(14,"ion-modal",4),e.bIt("didDismiss",function(){return n.showShiftModal=!1}),e.DNE(15,U,40,1,"ng-template"),e.k0s(),e.j41(16,"ion-modal",4),e.bIt("didDismiss",function(){return n.showAssignModal=!1}),e.DNE(17,z,37,2,"ng-template"),e.k0s()()),2&i&&(e.R7$(5),e.JRh(n.projectId?"Project Details":"New Project"),e.R7$(2),e.vxM(n.projectId?7:-1),e.R7$(2),e.vxM(n.isLoading?9:n.project||n.projectId?n.project?11:-1:10),e.R7$(3),e.Y8G("isOpen",n.showEditModal),e.R7$(2),e.Y8G("isOpen",n.showShiftModal),e.R7$(2),e.Y8G("isOpen",n.showAssignModal))},dependencies:[h.MD,s.X1,s.qT,s.BC,s.cb,s.j4,s.JD,s.YN,s.vS,a.W9,a.eU,a.BC,a.ai,a.QW,a.el,a.b_,a.I9,a.ME,a.tN,a.Jm,a.iq,a.nf,a.uz,a.he,a.In,a.Gp,a.eP,a.Sb,a.$w,a.nc,a.Nm,a.Ip,a.JI,P.q],styles:[".empty-state[_ngcontent-%COMP%]{text-align:center;padding:40px 20px}.empty-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:64px;color:var(--ion-color-medium);margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--ion-color-medium);margin:16px 0}ion-card-title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:8px}ion-segment[_ngcontent-%COMP%]{margin:16px}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start: 0}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:500;margin-bottom:4px}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--ion-color-medium);font-size:14px;margin:4px 0}"]})}}return o})()}}]);