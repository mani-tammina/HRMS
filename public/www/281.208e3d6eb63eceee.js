"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[281],{6281:(C,u,s)=>{s.r(u),s.d(u,{PayrollPage:()=>M});var _=s(467),p=s(177),g=s(4341),a=s(9907),y=s(2951),d=s(5873),n=s(4438),m=s(2061);function f(i,r){if(1&i&&(n.j41(0,"ion-select-option",8),n.EFF(1),n.k0s()),2&i){const e=r.$implicit;n.Y8G("value",e),n.R7$(),n.JRh(e)}}function P(i,r){1&i&&(n.j41(0,"div",9)(1,"ion-card")(2,"ion-card-content")(3,"p"),n.EFF(4,"Loading payslips..."),n.k0s()()()())}function h(i,r){if(1&i){const e=n.RV6();n.j41(0,"ion-button",25),n.bIt("click",function(){n.eBV(e);const o=n.XpG().$implicit,c=n.XpG(2);return n.Njj(c.downloadPayslip(o))}),n.nrm(1,"ion-icon",26),n.EFF(2," Download Payslip "),n.k0s()}}function F(i,r){if(1&i&&(n.j41(0,"ion-card",11)(1,"ion-card-header")(2,"div",12)(3,"div")(4,"ion-card-title"),n.EFF(5),n.k0s(),n.j41(6,"p",13),n.EFF(7),n.k0s()(),n.j41(8,"ion-badge",14),n.EFF(9),n.k0s()()(),n.j41(10,"ion-card-content")(11,"div",15)(12,"div",16)(13,"span",17),n.EFF(14,"Gross Salary:"),n.k0s(),n.j41(15,"span",18),n.EFF(16),n.nI1(17,"number"),n.k0s()(),n.j41(18,"div",16)(19,"span",17),n.EFF(20,"Deductions:"),n.k0s(),n.j41(21,"span",19),n.EFF(22),n.nI1(23,"number"),n.k0s()(),n.j41(24,"div",20)(25,"span",17)(26,"strong"),n.EFF(27,"Net Salary:"),n.k0s()(),n.j41(28,"span",18)(29,"strong"),n.EFF(30),n.nI1(31,"number"),n.k0s()()()(),n.j41(32,"div",21)(33,"div",22),n.nrm(34,"ion-icon",23),n.j41(35,"span"),n.EFF(36),n.k0s()(),n.j41(37,"div",22),n.nrm(38,"ion-icon",23),n.j41(39,"span"),n.EFF(40),n.k0s()(),n.j41(41,"div",22),n.nrm(42,"ion-icon",23),n.j41(43,"span"),n.EFF(44),n.k0s()()(),n.DNE(45,h,3,0,"ion-button",24),n.k0s()()),2&i){const e=r.$implicit,t=n.XpG(2);n.R7$(5),n.Lme("",t.getMonthName(e.month)," ",e.year,""),n.R7$(2),n.Lme("",e.employee_name," (",e.employee_code,")"),n.R7$(),n.Y8G("color",t.getStatusColor(e.status)),n.R7$(),n.JRh(e.status),n.R7$(7),n.SpI("\u20b9",n.i5U(17,13,e.gross_salary,"1.2-2"),""),n.R7$(6),n.SpI("-\u20b9",n.i5U(23,16,e.total_deductions,"1.2-2"),""),n.R7$(8),n.SpI("\u20b9",n.i5U(31,19,e.net_salary,"1.2-2"),""),n.R7$(6),n.SpI("Working Days: ",e.working_days,""),n.R7$(4),n.SpI("Present: ",e.present_days,""),n.R7$(4),n.SpI("Leaves: ",e.leave_days,""),n.R7$(),n.Y8G("ngIf","paid"===e.status)}}function v(i,r){if(1&i&&(n.j41(0,"div"),n.DNE(1,F,46,22,"ion-card",10),n.k0s()),2&i){const e=n.XpG();n.R7$(),n.Y8G("ngForOf",e.filteredPayslips)}}function E(i,r){if(1&i&&(n.j41(0,"ion-card")(1,"ion-card-content",27),n.nrm(2,"ion-icon",28),n.j41(3,"h3"),n.EFF(4,"No Payslips Found"),n.k0s(),n.j41(5,"p"),n.EFF(6),n.k0s()()()),2&i){const e=n.XpG();n.R7$(6),n.SpI("No payslips available for ",e.selectedYear,"")}}let M=(()=>{class i{constructor(e,t,o){this.payrollService=e,this.loadingController=t,this.toastController=o,this.payslips=[],this.filteredPayslips=[],this.isLoading=!1,this.selectedYear=(new Date).getFullYear(),this.years=[],(0,y.d)({downloadOutline:d.fPB,calendarOutline:d.RXF,cashOutline:d.A3w,documentTextOutline:d.pXZ});const c=(new Date).getFullYear();for(let l=0;l<3;l++)this.years.push(c-l)}ngOnInit(){this.loadPayslips()}loadPayslips(e){var t=this;return(0,_.A)(function*(){e||(t.isLoading=!0),t.payrollService.getMyPayslips().subscribe({next:o=>{t.payslips=o.payslips,t.applyFilter(),t.isLoading=!1,e&&e.target.complete()},error:o=>{console.error("Error loading payslips:",o),t.showToast("Failed to load payslips","danger"),t.isLoading=!1,e&&e.target.complete()}})})()}applyFilter(){this.filteredPayslips=this.payslips.filter(e=>e.year===this.selectedYear)}onYearChange(){this.applyFilter()}getMonthName(e){return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][parseInt(e)-1]||e}getStatusColor(e){switch(e?.toLowerCase()){case"paid":return"success";case"finalized":return"warning";default:return"medium"}}downloadPayslip(e){var t=this;return(0,_.A)(function*(){const o=yield t.loadingController.create({message:"Downloading payslip..."});yield o.present(),yield o.dismiss(),t.showToast("Payslip download will be available soon","warning")})()}showToast(e,t){var o=this;return(0,_.A)(function*(){yield(yield o.toastController.create({message:e,duration:3e3,color:t,position:"bottom"})).present()})()}static{this.\u0275fac=function(t){return new(t||i)(n.rXU(m.P),n.rXU(a.Xi),n.rXU(a.K_))}}static{this.\u0275cmp=n.VBU({type:i,selectors:[["app-payroll"]],standalone:!0,features:[n.aNF],decls:19,vars:5,consts:[["slot","start"],["defaultHref","/tabs/home"],["slot","fixed",3,"ionRefresh"],["lines","none"],["interface","popover",3,"ngModelChange","ionChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","loading-container",4,"ngIf"],[4,"ngIf"],[3,"value"],[1,"loading-container"],["class","payslip-card",4,"ngFor","ngForOf"],[1,"payslip-card"],[1,"payslip-header"],[1,"employee-info"],[3,"color"],[1,"salary-details"],[1,"salary-row"],[1,"label"],[1,"value"],[1,"value","deduction"],[1,"salary-row","net"],[1,"attendance-info"],[1,"info-item"],["name","calendar-outline"],["expand","block",3,"click",4,"ngIf"],["expand","block",3,"click"],["name","download-outline","slot","start"],[1,"empty-state"],["name","document-text-outline","size","large"]],template:function(t,o){1&t&&(n.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),n.nrm(3,"ion-back-button",1),n.k0s(),n.j41(4,"ion-title"),n.EFF(5,"My Payslips"),n.k0s()()(),n.j41(6,"ion-content")(7,"ion-refresher",2),n.bIt("ionRefresh",function(l){return o.loadPayslips(l)}),n.nrm(8,"ion-refresher-content"),n.k0s(),n.j41(9,"ion-card")(10,"ion-card-content")(11,"ion-item",3)(12,"ion-label"),n.EFF(13,"Year"),n.k0s(),n.j41(14,"ion-select",4),n.mxI("ngModelChange",function(l){return n.DH7(o.selectedYear,l)||(o.selectedYear=l),l}),n.bIt("ionChange",function(){return o.onYearChange()}),n.DNE(15,f,2,2,"ion-select-option",5),n.k0s()()()(),n.DNE(16,P,5,0,"div",6)(17,v,2,1,"div",7)(18,E,7,1,"ion-card",7),n.k0s()),2&t&&(n.R7$(14),n.R50("ngModel",o.selectedYear),n.R7$(),n.Y8G("ngForOf",o.years),n.R7$(),n.Y8G("ngIf",o.isLoading),n.R7$(),n.Y8G("ngIf",!o.isLoading&&o.filteredPayslips.length>0),n.R7$(),n.Y8G("ngIf",!o.isLoading&&0===o.filteredPayslips.length))},dependencies:[p.MD,p.Sq,p.bT,p.QX,g.YN,g.BC,g.vS,a.W9,a.eU,a.BC,a.ai,a.QW,a.el,a.b_,a.I9,a.ME,a.tN,a.uz,a.he,a.In,a.Jm,a.iq,a.To,a.Ki,a.Nm,a.Ip],styles:[".payslip-card[_ngcontent-%COMP%]{margin:12px}.payslip-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start}.employee-info[_ngcontent-%COMP%]{color:var(--ion-color-medium);font-size:.9em;margin-top:4px}.salary-details[_ngcontent-%COMP%]{margin:16px 0;padding:16px;background:var(--ion-color-light);border-radius:8px}.salary-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:8px 0}.salary-row.net[_ngcontent-%COMP%]{border-top:2px solid var(--ion-color-primary);margin-top:8px;padding-top:12px;font-size:1.1em}.value.deduction[_ngcontent-%COMP%]{color:var(--ion-color-danger)}.attendance-info[_ngcontent-%COMP%]{display:flex;gap:16px;margin:16px 0;flex-wrap:wrap}.info-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:.9em;color:var(--ion-color-medium)}.info-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.2em}.loading-container[_ngcontent-%COMP%]{padding:20px;text-align:center}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:40px 20px}.empty-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-medium);margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:16px 0 8px;color:var(--ion-color-dark)}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--ion-color-medium)}"]})}}return i})()}}]);