"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[198],{198:(w,_,l)=>{l.r(_),l.d(_,{HolidaysPage:()=>I});var y=l(467),g=l(177),p=l(4341),a=l(773),m=l(2951),c=l(5873),t=l(4438),u=l(5312),f=l(1626);let v=(()=>{class i{constructor(n){this.http=n,this.apiUrl=`${u.c.apiUrl}/holidays`}getAllHolidays(n,o){let e={};return n&&(e.year=n.toString()),o&&(e.location=o.toString()),this.http.get(this.apiUrl,{params:e})}getUpcomingHolidays(n){let o={};return n&&(o.limit=n.toString()),this.http.get(`${this.apiUrl}/upcoming`,{params:o})}createHoliday(n){return this.http.post(this.apiUrl,n)}updateHoliday(n,o){return this.http.put(`${this.apiUrl}/${n}`,o)}deleteHoliday(n){return this.http.delete(`${this.apiUrl}/${n}`)}static{this.\u0275fac=function(o){return new(o||i)(t.KVO(f.Qq))}}static{this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function F(i,s){if(1&i&&(t.j41(0,"ion-select-option",8),t.EFF(1),t.k0s()),2&i){const n=s.$implicit;t.Y8G("value",n),t.R7$(),t.JRh(n)}}function C(i,s){1&i&&(t.j41(0,"ion-badge",22),t.EFF(1,"Optional"),t.k0s())}function P(i,s){if(1&i&&(t.j41(0,"p",23),t.EFF(1),t.k0s()),2&i){const n=t.XpG().$implicit;t.R7$(),t.JRh(n.description)}}function x(i,s){if(1&i&&(t.j41(0,"div",24),t.nrm(1,"ion-icon",25),t.j41(2,"span"),t.EFF(3),t.k0s()()),2&i){const n=t.XpG().$implicit,o=t.XpG(4);t.R7$(3),t.SpI("",o.getDaysUntil(n.holiday_date)," days to go")}}function M(i,s){if(1&i&&(t.j41(0,"ion-card")(1,"ion-card-content")(2,"div",12)(3,"div",13)(4,"div",14),t.EFF(5),t.k0s(),t.j41(6,"div",15),t.EFF(7),t.k0s()(),t.j41(8,"div",16)(9,"h3"),t.EFF(10),t.k0s(),t.j41(11,"p",17)(12,"ion-badge",18),t.EFF(13),t.k0s(),t.DNE(14,C,2,0,"ion-badge",19),t.k0s(),t.DNE(15,P,2,1,"p",20)(16,x,4,1,"div",21),t.k0s()()()()),2&i){const n=s.$implicit,o=t.XpG(4);t.AVh("past-holiday",o.isPast(n.holiday_date)),t.R7$(5),t.JRh(o.formatDate(n.holiday_date).split(",")[1].split(" ")[2]),t.R7$(2),t.JRh(o.formatDate(n.holiday_date).split(",")[0]),t.R7$(3),t.JRh(n.holiday_name),t.R7$(2),t.Y8G("color",o.getHolidayTypeColor(n.holiday_type)),t.R7$(),t.SpI(" ",n.holiday_type," "),t.R7$(),t.Y8G("ngIf",n.is_optional),t.R7$(),t.Y8G("ngIf",n.description),t.R7$(),t.Y8G("ngIf",o.isUpcoming(n.holiday_date))}}function R(i,s){if(1&i&&(t.j41(0,"div")(1,"div",10)(2,"h3"),t.EFF(3),t.k0s()(),t.DNE(4,M,17,10,"ion-card",11),t.k0s()),2&i){const n=s.$implicit;t.R7$(3),t.JRh(n.month),t.R7$(),t.Y8G("ngForOf",n.holidays)}}function H(i,s){if(1&i&&(t.j41(0,"div"),t.DNE(1,R,5,2,"div",9),t.k0s()),2&i){const n=t.XpG(2);t.R7$(),t.Y8G("ngForOf",n.groupHolidaysByMonth())}}function O(i,s){if(1&i&&(t.j41(0,"ion-card")(1,"ion-card-content",26),t.nrm(2,"ion-icon",27),t.j41(3,"h3"),t.EFF(4,"No Holidays"),t.k0s(),t.j41(5,"p"),t.EFF(6),t.k0s()()()),2&i){const n=t.XpG(2);t.R7$(6),t.SpI("No holidays found for ",n.selectedYear,"")}}function $(i,s){if(1&i){const n=t.RV6();t.j41(0,"div")(1,"ion-card")(2,"ion-card-content")(3,"ion-item",5)(4,"ion-label"),t.EFF(5,"Select Year"),t.k0s(),t.j41(6,"ion-select",6),t.mxI("ngModelChange",function(e){t.eBV(n);const d=t.XpG();return t.DH7(d.selectedYear,e)||(d.selectedYear=e),t.Njj(e)}),t.bIt("ionChange",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.onYearChange())}),t.DNE(7,F,2,2,"ion-select-option",7),t.k0s()()()(),t.DNE(8,H,2,1,"div",4)(9,O,7,1,"ion-card",4),t.k0s()}if(2&i){const n=t.XpG();t.R7$(6),t.R50("ngModel",n.selectedYear),t.R7$(),t.Y8G("ngForOf",n.years),t.R7$(),t.Y8G("ngIf",!n.isLoading),t.R7$(),t.Y8G("ngIf",!n.isLoading&&0===n.holidays.length)}}function j(i,s){1&i&&(t.j41(0,"ion-badge",22),t.EFF(1,"Optional"),t.k0s())}function k(i,s){if(1&i&&(t.j41(0,"p",23),t.EFF(1),t.k0s()),2&i){const n=t.XpG().$implicit;t.R7$(),t.JRh(n.description)}}function E(i,s){if(1&i&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&i){const n=t.XpG().$implicit,o=t.XpG(2);t.R7$(),t.SpI(" ",o.getDaysUntil(n.holiday_date)," days to go ")}}function D(i,s){1&i&&(t.j41(0,"span"),t.EFF(1,"Today!"),t.k0s())}function G(i,s){if(1&i&&(t.j41(0,"ion-card",29)(1,"ion-card-content")(2,"div",12)(3,"div",30)(4,"div",14),t.EFF(5),t.k0s(),t.j41(6,"div",15),t.EFF(7),t.k0s(),t.j41(8,"div",31),t.EFF(9),t.k0s()(),t.j41(10,"div",16)(11,"h3"),t.EFF(12),t.k0s(),t.j41(13,"p",17)(14,"ion-badge",18),t.EFF(15),t.k0s(),t.DNE(16,j,2,0,"ion-badge",19),t.k0s(),t.DNE(17,k,2,1,"p",20),t.j41(18,"div",24),t.nrm(19,"ion-icon",25),t.DNE(20,E,2,1,"span",4)(21,D,2,0,"span",4),t.k0s()()()()()),2&i){const n=s.$implicit,o=t.XpG(2);t.R7$(5),t.JRh(o.formatDate(n.holiday_date).split(",")[1].split(" ")[2]),t.R7$(2),t.JRh(o.formatDate(n.holiday_date).split(",")[0]),t.R7$(2),t.JRh(o.getMonthGroup(n.holiday_date).split(" ")[0]),t.R7$(3),t.JRh(n.holiday_name),t.R7$(2),t.Y8G("color",o.getHolidayTypeColor(n.holiday_type)),t.R7$(),t.SpI(" ",n.holiday_type," "),t.R7$(),t.Y8G("ngIf",n.is_optional),t.R7$(),t.Y8G("ngIf",n.description),t.R7$(3),t.Y8G("ngIf",o.getDaysUntil(n.holiday_date)>0),t.R7$(),t.Y8G("ngIf",0===o.getDaysUntil(n.holiday_date))}}function T(i,s){1&i&&(t.j41(0,"ion-card")(1,"ion-card-content",26),t.nrm(2,"ion-icon",27),t.j41(3,"h3"),t.EFF(4,"No Upcoming Holidays"),t.k0s(),t.j41(5,"p"),t.EFF(6,"No holidays scheduled in the near future"),t.k0s()()())}function Y(i,s){if(1&i&&(t.j41(0,"div"),t.DNE(1,G,22,10,"ion-card",28)(2,T,7,0,"ion-card",4),t.k0s()),2&i){const n=t.XpG();t.R7$(),t.Y8G("ngForOf",n.upcomingHolidays),t.R7$(),t.Y8G("ngIf",0===n.upcomingHolidays.length)}}let I=(()=>{class i{constructor(n,o,e,d){this.holidaysService=n,this.loadingController=o,this.toastController=e,this.alertController=d,this.holidays=[],this.upcomingHolidays=[],this.selectedYear=(new Date).getFullYear(),this.years=[],this.view="all",this.isLoading=!1,(0,m.d)({addOutline:c.EKF,calendarOutline:c.RXF,checkmarkOutline:c.g1L,closeOutline:c.xfX,timeOutline:c.CVk});const r=(new Date).getFullYear();for(let h=-1;h<2;h++)this.years.push(r+h)}ngOnInit(){this.loadHolidays(),this.loadUpcomingHolidays()}segmentChanged(n){this.view=n.detail.value}loadHolidays(n){var o=this;return(0,y.A)(function*(){n||(o.isLoading=!0),o.holidaysService.getAllHolidays(o.selectedYear).subscribe({next:e=>{o.holidays=e.holidays.sort((d,r)=>new Date(d.holiday_date).getTime()-new Date(r.holiday_date).getTime()),o.isLoading=!1,n&&n.target.complete()},error:e=>{console.error("Error loading holidays:",e),o.showToast("Failed to load holidays","danger"),o.isLoading=!1,n&&n.target.complete()}})})()}loadUpcomingHolidays(){this.holidaysService.getUpcomingHolidays(10).subscribe({next:n=>{this.upcomingHolidays=n.holidays},error:n=>{console.error("Error loading upcoming holidays:",n)}})}onYearChange(){this.loadHolidays()}formatDate(n){try{return new Date(n).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})}catch{return n}}getHolidayTypeColor(n){switch(n?.toLowerCase()){case"national":return"danger";case"regional":return"warning";case"company":return"primary";default:return"medium"}}isUpcoming(n){return new Date(n)>new Date}isPast(n){return new Date(n)<new Date}getDaysUntil(n){const o=new Date(n),e=new Date,d=o.getTime()-e.getTime();return Math.ceil(d/864e5)}getMonthGroup(n){return new Date(n).toLocaleDateString("en-US",{month:"long",year:"numeric"})}groupHolidaysByMonth(){const n=new Map;return this.holidays.forEach(o=>{const e=this.getMonthGroup(o.holiday_date);n.has(e)||n.set(e,[]),n.get(e).push(o)}),Array.from(n.entries()).map(([o,e])=>({month:o,holidays:e}))}showToast(n,o){var e=this;return(0,y.A)(function*(){yield(yield e.toastController.create({message:n,duration:3e3,color:o,position:"bottom"})).present()})()}static{this.\u0275fac=function(o){return new(o||i)(t.rXU(v),t.rXU(a.Xi),t.rXU(a.K_),t.rXU(a.hG))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-holidays"]],standalone:!0,features:[t.aNF],decls:17,vars:3,consts:[["slot","start"],[3,"ngModelChange","ionChange","ngModel"],["value","all"],["value","upcoming"],[4,"ngIf"],["lines","none"],["interface","popover",3,"ngModelChange","ionChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[4,"ngFor","ngForOf"],[1,"month-header"],[3,"past-holiday",4,"ngFor","ngForOf"],[1,"holiday-item"],[1,"holiday-date"],[1,"day"],[1,"day-name"],[1,"holiday-details"],[1,"holiday-type"],[3,"color"],["color","warning",4,"ngIf"],["class","description",4,"ngIf"],["class","days-until",4,"ngIf"],["color","warning"],[1,"description"],[1,"days-until"],["name","time-outline"],[1,"empty-state"],["name","calendar-outline","size","large"],["class","upcoming-card",4,"ngFor","ngForOf"],[1,"upcoming-card"],[1,"holiday-date","upcoming"],[1,"month-name"]],template:function(o,e){1&o&&(t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),t.nrm(3,"ion-menu-button"),t.k0s(),t.j41(4,"ion-title"),t.EFF(5,"Holidays"),t.k0s()(),t.j41(6,"ion-toolbar")(7,"ion-segment",1),t.mxI("ngModelChange",function(r){return t.DH7(e.view,r)||(e.view=r),r}),t.bIt("ionChange",function(r){return e.segmentChanged(r)}),t.j41(8,"ion-segment-button",2)(9,"ion-label"),t.EFF(10,"All Holidays"),t.k0s()(),t.j41(11,"ion-segment-button",3)(12,"ion-label"),t.EFF(13,"Upcoming"),t.k0s()()()()(),t.j41(14,"ion-content"),t.DNE(15,$,10,4,"div",4)(16,Y,3,2,"div",4),t.k0s()),2&o&&(t.R7$(7),t.R50("ngModel",e.view),t.R7$(8),t.Y8G("ngIf","all"===e.view),t.R7$(),t.Y8G("ngIf","upcoming"===e.view))},dependencies:[g.MD,g.Sq,g.bT,p.YN,p.BC,p.vS,a.W9,a.eU,a.BC,a.ai,a.QW,a.MC,a.b_,a.I9,a.uz,a.he,a.In,a.iq,a.Gp,a.eP,a.Nm,a.Ip],styles:[".month-header[_ngcontent-%COMP%]{padding:16px 16px 8px}.month-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:var(--ion-color-primary);font-size:1.1em;font-weight:600}.holiday-item[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:flex-start}.holiday-date[_ngcontent-%COMP%]{min-width:60px;text-align:center;padding:12px;background:var(--ion-color-primary);color:#fff;border-radius:8px}.holiday-date[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]{font-size:1.8em;font-weight:700;line-height:1}.holiday-date[_ngcontent-%COMP%]   .day-name[_ngcontent-%COMP%]{font-size:.85em;margin-top:4px;opacity:.9}.holiday-date.upcoming[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--ion-color-primary),var(--ion-color-secondary))}.holiday-date.upcoming[_ngcontent-%COMP%]   .month-name[_ngcontent-%COMP%]{font-size:.75em;margin-top:2px;opacity:.9;text-transform:uppercase}.holiday-details[_ngcontent-%COMP%]{flex:1}.holiday-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:1.1em;color:var(--ion-color-dark)}.holiday-details[_ngcontent-%COMP%]   .holiday-type[_ngcontent-%COMP%]{margin:8px 0;display:flex;gap:8px;flex-wrap:wrap}.holiday-details[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{margin:8px 0;font-size:.9em;color:var(--ion-color-medium)}.days-until[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;margin-top:8px;font-size:.9em;color:var(--ion-color-success);font-weight:500}.days-until[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.2em}.past-holiday[_ngcontent-%COMP%]{opacity:.6}.past-holiday[_ngcontent-%COMP%]   .holiday-date[_ngcontent-%COMP%]{background:var(--ion-color-medium)}.upcoming-card[_ngcontent-%COMP%]{margin:12px;border-left:4px solid var(--ion-color-primary)}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:40px 20px}.empty-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-medium);margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:16px 0 8px;color:var(--ion-color-dark)}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--ion-color-medium)}ion-card[_ngcontent-%COMP%]{margin:8px 12px}"]})}}return i})()}}]);