"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[437],{4437:(b,m,r)=>{r.r(m),r.d(m,{AnnouncementsPage:()=>M});var d=r(467),l=r(177),u=r(4341),i=r(7820),g=r(2951),s=r(5873),n=r(4438),p=r(5312),f=r(1626);let h=(()=>{class o{constructor(e){this.http=e,this.apiUrl=`${p.c.apiUrl}/announcements`}getAnnouncements(e,t){let a={};return e&&(a.type=e),t&&(a.limit=t.toString()),this.http.get(this.apiUrl,{params:a})}getAnnouncement(e){return this.http.get(`${this.apiUrl}/${e}`)}createAnnouncement(e){return this.http.post(this.apiUrl,e)}updateAnnouncement(e,t){return this.http.put(`${this.apiUrl}/${e}`,t)}deleteAnnouncement(e){return this.http.delete(`${this.apiUrl}/${e}`)}deactivateAnnouncement(e){return this.http.put(`${this.apiUrl}/${e}/deactivate`,{})}static{this.\u0275fac=function(t){return new(t||o)(n.KVO(f.Qq))}}static{this.\u0275prov=n.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();function v(o,c){1&o&&(n.j41(0,"div",4)(1,"ion-card")(2,"ion-card-content")(3,"p"),n.EFF(4,"Loading announcements..."),n.k0s()()()())}function _(o,c){if(1&o&&(n.j41(0,"span",18),n.EFF(1),n.k0s()),2&o){const e=n.XpG(2).$implicit;n.R7$(),n.SpI(" Target: ",e.target_audience," ")}}function C(o,c){if(1&o&&(n.j41(0,"div",15)(1,"span",16),n.EFF(2),n.k0s(),n.DNE(3,_,2,1,"span",17),n.k0s()),2&o){const e=n.XpG().$implicit;n.R7$(2),n.SpI("By: ",e.published_by_name,""),n.R7$(),n.Y8G("ngIf",e.target_audience)}}function y(o,c){if(1&o&&(n.j41(0,"div",19),n.nrm(1,"ion-icon",20),n.j41(2,"span"),n.EFF(3),n.k0s()()),2&o){const e=n.XpG().$implicit,t=n.XpG(2);n.R7$(3),n.SpI("Expires: ",t.formatDate(e.expires_at),"")}}function P(o,c){if(1&o&&(n.j41(0,"ion-card")(1,"ion-card-header")(2,"div",6)(3,"div",7),n.nrm(4,"ion-icon",8),n.j41(5,"ion-card-title"),n.EFF(6),n.k0s()(),n.j41(7,"ion-badge",9),n.EFF(8),n.k0s()(),n.j41(9,"div",10)(10,"ion-chip",9)(11,"ion-label"),n.EFF(12),n.k0s()(),n.j41(13,"span",11),n.EFF(14),n.k0s()()(),n.j41(15,"ion-card-content"),n.nrm(16,"div",12),n.DNE(17,C,4,2,"div",13)(18,y,4,1,"div",14),n.k0s()()),2&o){const e=c.$implicit,t=n.XpG(2);n.HbH("announcement-card "+e.type),n.R7$(4),n.Y8G("name",t.getTypeIcon(e.type))("color",t.getTypeColor(e.type)),n.R7$(2),n.JRh(e.title),n.R7$(),n.Y8G("color",t.getPriorityColor(e.priority)),n.R7$(),n.SpI(" ",e.priority," "),n.R7$(2),n.Y8G("color",t.getTypeColor(e.type)),n.R7$(2),n.JRh(e.type),n.R7$(2),n.JRh(t.formatDate(e.published_at)),n.R7$(2),n.Y8G("innerHTML",e.content,n.npT),n.R7$(),n.Y8G("ngIf",e.published_by_name),n.R7$(),n.Y8G("ngIf",e.expires_at)}}function x(o,c){if(1&o&&(n.j41(0,"div"),n.DNE(1,P,19,13,"ion-card",5),n.k0s()),2&o){const e=n.XpG();n.R7$(),n.Y8G("ngForOf",e.announcements)}}function O(o,c){1&o&&(n.j41(0,"ion-card")(1,"ion-card-content",21),n.nrm(2,"ion-icon",22),n.j41(3,"h3"),n.EFF(4,"No Announcements"),n.k0s(),n.j41(5,"p"),n.EFF(6,"There are no active announcements at the moment"),n.k0s()()())}let M=(()=>{class o{constructor(e,t,a){this.announcementsService=e,this.loadingController=t,this.toastController=a,this.announcements=[],this.isLoading=!1,(0,g.d)({megaphoneOutline:s.pgS,alertCircleOutline:s.ndb,informationCircleOutline:s.jdS,calendarOutline:s.RXF})}ngOnInit(){this.loadAnnouncements()}ionViewWillEnter(){this.loadAnnouncements()}loadAnnouncements(e){var t=this;return(0,d.A)(function*(){e||(t.isLoading=!0),t.announcementsService.getAnnouncements().subscribe({next:a=>{t.announcements=a.announcements,t.isLoading=!1,e&&e.target.complete()},error:a=>{console.error("Error loading announcements:",a),t.showToast("Failed to load announcements","danger"),t.isLoading=!1,e&&e.target.complete()}})})()}getTypeColor(e){switch(e?.toLowerCase()){case"urgent":return"danger";case"policy":return"warning";case"event":return"success";default:return"primary"}}getTypeIcon(e){switch(e?.toLowerCase()){case"urgent":return"alert-circle-outline";case"event":return"calendar-outline";default:return"information-circle-outline"}}getPriorityColor(e){switch(e?.toLowerCase()){case"high":return"danger";case"medium":return"warning";default:return"medium"}}formatDate(e){return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}showToast(e,t){var a=this;return(0,d.A)(function*(){yield(yield a.toastController.create({message:e,duration:3e3,color:t,position:"bottom"})).present()})()}static{this.\u0275fac=function(t){return new(t||o)(n.rXU(h),n.rXU(i.Xi),n.rXU(i.K_))}}static{this.\u0275cmp=n.VBU({type:o,selectors:[["app-announcements"]],standalone:!0,features:[n.aNF],decls:12,vars:3,consts:[["slot","start"],["slot","fixed",3,"ionRefresh"],["class","loading-container",4,"ngIf"],[4,"ngIf"],[1,"loading-container"],[3,"class",4,"ngFor","ngForOf"],[1,"announcement-header"],[1,"header-content"],[3,"name","color"],[3,"color"],[1,"announcement-meta"],[1,"published-date"],[1,"announcement-content",3,"innerHTML"],["class","announcement-footer",4,"ngIf"],["class","expiry-info",4,"ngIf"],[1,"announcement-footer"],[1,"author"],["class","audience",4,"ngIf"],[1,"audience"],[1,"expiry-info"],["name","time-outline"],[1,"empty-state"],["name","megaphone-outline","size","large"]],template:function(t,a){1&t&&(n.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),n.nrm(3,"ion-menu-button"),n.k0s(),n.j41(4,"ion-title"),n.EFF(5,"Announcements"),n.k0s()()(),n.j41(6,"ion-content")(7,"ion-refresher",1),n.bIt("ionRefresh",function(F){return a.loadAnnouncements(F)}),n.nrm(8,"ion-refresher-content"),n.k0s(),n.DNE(9,v,5,0,"div",2)(10,x,2,1,"div",3)(11,O,7,0,"ion-card",3),n.k0s()),2&t&&(n.R7$(9),n.Y8G("ngIf",a.isLoading),n.R7$(),n.Y8G("ngIf",!a.isLoading&&a.announcements.length>0),n.R7$(),n.Y8G("ngIf",!a.isLoading&&0===a.announcements.length))},dependencies:[l.MD,l.Sq,l.bT,u.YN,i.W9,i.eU,i.BC,i.ai,i.QW,i.MC,i.b_,i.I9,i.ME,i.tN,i.he,i.In,i.iq,i.To,i.Ki,i.ZB],styles:[".announcement-card[_ngcontent-%COMP%]{margin:12px;border-left:4px solid var(--ion-color-primary)}.announcement-card.urgent[_ngcontent-%COMP%]{border-left-color:var(--ion-color-danger);background:rgba(var(--ion-color-danger-rgb),.05)}.announcement-card.policy[_ngcontent-%COMP%]{border-left-color:var(--ion-color-warning)}.announcement-card.event[_ngcontent-%COMP%]{border-left-color:var(--ion-color-success)}.announcement-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:12px}.announcement-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.5em}.announcement-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{flex:1;font-size:1.1em}.announcement-meta[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:8px;font-size:.85em}.announcement-meta[_ngcontent-%COMP%]   .published-date[_ngcontent-%COMP%]{color:var(--ion-color-medium)}.announcement-content[_ngcontent-%COMP%]{margin:16px 0;line-height:1.6;color:var(--ion-color-dark);white-space:pre-wrap}.announcement-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:16px;padding-top:12px;border-top:1px solid var(--ion-color-light);font-size:.85em;color:var(--ion-color-medium)}.announcement-footer[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%]{font-weight:500}.expiry-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;margin-top:12px;padding:8px;background:var(--ion-color-light);border-radius:4px;font-size:.85em;color:var(--ion-color-warning)}.expiry-info[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.2em}.loading-container[_ngcontent-%COMP%]{padding:20px;text-align:center}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:40px 20px}.empty-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-medium);margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:16px 0 8px;color:var(--ion-color-dark)}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--ion-color-medium)}"]})}}return o})()}}]);