"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6547],{6547:($,l,s)=>{s.r(l),s.d(l,{AssetReportsPage:()=>F});var p=s(467),d=s(177),r=s(7820),g=s(2951),c=s(5873),m=s(8933),u=s(6233),t=s(4438),P=s(5493),v=s(6119);const C=(n,i)=>i.asset_type,M=(n,i)=>i.status,_=(n,i)=>i.id;function O(n,i){1&n&&t.nrm(0,"app-loading",3)}function h(n,i){if(1&n&&(t.j41(0,"div",15)(1,"div",17)(2,"span",18),t.EFF(3),t.k0s(),t.j41(4,"span",19),t.EFF(5),t.k0s()(),t.j41(6,"div",20),t.nrm(7,"div",21),t.k0s()()),2&n){const e=i.$implicit,o=t.XpG(2);t.R7$(3),t.JRh(e.asset_type),t.R7$(2),t.JRh(e.count),t.R7$(2),t.xc7("width",e.count/o.report.total_assets*100,"%")}}function f(n,i){if(1&n&&(t.j41(0,"div",15)(1,"div",17)(2,"span",18),t.EFF(3),t.nI1(4,"titlecase"),t.k0s(),t.j41(5,"span",19),t.EFF(6),t.k0s()(),t.j41(7,"div",20),t.nrm(8,"div",21),t.k0s()()),2&n){const e=i.$implicit,o=t.XpG(2);t.R7$(3),t.JRh(t.bMT(4,4,e.status)),t.R7$(3),t.JRh(e.count),t.R7$(2),t.xc7("width",e.count/o.report.total_assets*100,"%")}}function R(n,i){if(1&n&&(t.j41(0,"div",23)(1,"div",24)(2,"div",25),t.EFF(3),t.k0s(),t.j41(4,"div",26),t.EFF(5),t.k0s()(),t.j41(6,"div",27),t.EFF(7),t.k0s()()),2&n){const e=i.$implicit,o=t.XpG(3);t.R7$(3),t.JRh(e.asset_name),t.R7$(2),t.JRh(e.employee_name),t.R7$(2),t.JRh(o.formatDate(e.allocation_date))}}function b(n,i){if(1&n&&(t.j41(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),t.EFF(3,"Recent Allocations"),t.k0s()(),t.j41(4,"ion-card-content")(5,"div",22),t.Z7z(6,R,8,3,"div",23,_),t.k0s()()()),2&n){const e=t.XpG(2);t.R7$(6),t.Dyx(e.report.recent_allocations)}}function E(n,i){if(1&n&&(t.j41(0,"div",29)(1,"div",24)(2,"div",25),t.EFF(3),t.k0s(),t.j41(4,"div",26),t.EFF(5),t.k0s()(),t.j41(6,"div",27),t.EFF(7),t.k0s()()),2&n){const e=i.$implicit,o=t.XpG(3);t.R7$(3),t.JRh(e.asset_name),t.R7$(2),t.JRh(e.employee_name),t.R7$(2),t.SpI("Due: ",o.formatDate(e.expected_return_date),"")}}function y(n,i){if(1&n&&(t.j41(0,"ion-card",16)(1,"ion-card-header")(2,"ion-card-title"),t.nrm(3,"ion-icon",28),t.EFF(4),t.k0s()(),t.j41(5,"ion-card-content")(6,"div",22),t.Z7z(7,E,8,3,"div",29,_),t.k0s()()()),2&n){const e=t.XpG(2);t.R7$(4),t.SpI(" Overdue Returns (",e.report.overdue_returns.length,") "),t.R7$(3),t.Dyx(e.report.overdue_returns)}}function x(n,i){if(1&n&&(t.j41(0,"ion-grid")(1,"ion-row")(2,"ion-col",5),t.nrm(3,"app-stat-card",6),t.k0s(),t.j41(4,"ion-col",5),t.nrm(5,"app-stat-card",7),t.k0s(),t.j41(6,"ion-col",5),t.nrm(7,"app-stat-card",8),t.k0s(),t.j41(8,"ion-col",5),t.nrm(9,"app-stat-card",9),t.k0s()()(),t.j41(10,"ion-card")(11,"ion-card-header")(12,"ion-card-title"),t.EFF(13,"Asset Utilization Rate"),t.k0s()(),t.j41(14,"ion-card-content")(15,"div",10)(16,"div",11)(17,"span",12),t.EFF(18),t.k0s()(),t.j41(19,"p",13),t.EFF(20),t.k0s()()()(),t.j41(21,"ion-card")(22,"ion-card-header")(23,"ion-card-title"),t.EFF(24,"Assets by Type"),t.k0s()(),t.j41(25,"ion-card-content")(26,"div",14),t.Z7z(27,h,8,4,"div",15,C),t.k0s()()(),t.j41(29,"ion-card")(30,"ion-card-header")(31,"ion-card-title"),t.EFF(32,"Assets by Status"),t.k0s()(),t.j41(33,"ion-card-content")(34,"div",14),t.Z7z(35,f,9,6,"div",15,M),t.k0s()()(),t.DNE(37,b,8,0,"ion-card")(38,y,9,1,"ion-card",16)),2&n){const e=t.XpG();t.R7$(3),t.Y8G("value",e.report.total_assets),t.R7$(2),t.Y8G("value",e.report.available_assets),t.R7$(2),t.Y8G("value",e.report.allocated_assets),t.R7$(2),t.Y8G("value",e.report.maintenance_assets),t.R7$(9),t.SpI("",e.getUtilizationRate(),"%"),t.R7$(2),t.Lme(" ",e.report.allocated_assets," of ",e.report.total_assets," assets currently in use "),t.R7$(7),t.Dyx(e.report.by_type),t.R7$(8),t.Dyx(e.report.by_status),t.R7$(2),t.vxM(e.report.recent_allocations&&e.report.recent_allocations.length>0?37:-1),t.R7$(),t.vxM(e.report.overdue_returns&&e.report.overdue_returns.length>0?38:-1)}}let F=(()=>{class n{constructor(e,o){this.assetsService=e,this.errorHandler=o,this.report=null,this.isLoading=!1,(0,g.d)({cubeOutline:c.a7r,checkmarkCircleOutline:c.gz2,constructOutline:c.C0N,closeCircleOutline:c.p9N,trendingUpOutline:c.F0Q})}ngOnInit(){this.loadReport()}loadReport(){var o,e=this;this.isLoading=!0,this.assetsService.getAssetReports().subscribe({next:o=>{this.report=o.report,this.isLoading=!1},error:(o=(0,p.A)(function*(a){yield e.errorHandler.handleError(a,"Failed to load asset reports"),e.isLoading=!1}),function(k){return o.apply(this,arguments)})})}handleRefresh(e){this.loadReport(),setTimeout(()=>e.target.complete(),1e3)}getUtilizationRate(){if(!this.report)return 0;const e=this.report.total_assets;return 0===e?0:Math.round(this.report.allocated_assets/e*100)}formatDate(e){return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(P.T),t.rXU(v.c))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-asset-reports"]],standalone:!0,features:[t.aNF],decls:12,vars:2,consts:[["slot","start"],["defaultHref","/admin/assets"],[1,"page-container"],["message","Loading reports...","type","spinner"],["slot","fixed",3,"ionRefresh"],["size","6","sizeMd","3"],["title","Total Assets","icon","cube-outline","iconColor","primary",3,"value"],["title","Available","icon","checkmark-circle-outline","iconColor","success",3,"value"],["title","Allocated","icon","trending-up-outline","iconColor","primary",3,"value"],["title","Maintenance","icon","construct-outline","iconColor","warning",3,"value"],[1,"utilization-display"],[1,"progress-circle"],[1,"percentage"],[1,"utilization-text"],[1,"distribution-list"],[1,"distribution-item"],[1,"warning-card"],[1,"item-info"],[1,"item-label"],[1,"item-count"],[1,"progress-bar"],[1,"progress-fill"],[1,"recent-list"],[1,"recent-item"],[1,"recent-info"],[1,"asset-name"],[1,"employee-name"],[1,"recent-date"],["name","alert-circle-outline","color","danger"],[1,"recent-item","overdue"]],template:function(o,a){1&o&&(t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),t.nrm(3,"ion-back-button",1),t.k0s(),t.j41(4,"ion-title"),t.EFF(5,"Asset Reports"),t.k0s()()(),t.j41(6,"ion-content")(7,"div",2),t.DNE(8,O,1,0,"app-loading",3)(9,x,39,9),t.j41(10,"ion-refresher",4),t.bIt("ionRefresh",function(j){return a.handleRefresh(j)}),t.nrm(11,"ion-refresher-content"),t.k0s()()()),2&o&&(t.R7$(8),t.vxM(a.isLoading?8:-1),t.R7$(),t.vxM(!a.isLoading&&a.report?9:-1))},dependencies:[d.MD,d.PV,r.W9,r.eU,r.BC,r.ai,r.QW,r.el,r.b_,r.I9,r.ME,r.tN,r.lO,r.ln,r.hU,r.iq,r.To,r.Ki,m.q,u.q],styles:['.page-container[_ngcontent-%COMP%]{padding:1rem}.utilization-display[_ngcontent-%COMP%]{text-align:center;padding:2rem 0}.utilization-display[_ngcontent-%COMP%]   .progress-circle[_ngcontent-%COMP%]{width:150px;height:150px;margin:0 auto 1rem;border-radius:50%;background:conic-gradient(var(--ion-color-primary) calc(var(--progress, 0) * 1%),var(--ion-color-light) 0);display:flex;align-items:center;justify-content:center;position:relative}.utilization-display[_ngcontent-%COMP%]   .progress-circle[_ngcontent-%COMP%]:before{content:"";position:absolute;width:120px;height:120px;background:var(--card-background);border-radius:50%}.utilization-display[_ngcontent-%COMP%]   .progress-circle[_ngcontent-%COMP%]   .percentage[_ngcontent-%COMP%]{position:relative;font-size:2rem;font-weight:700;color:var(--text-primary)}.utilization-display[_ngcontent-%COMP%]   .utilization-text[_ngcontent-%COMP%]{color:var(--text-secondary);margin:0}.distribution-list[_ngcontent-%COMP%]   .distribution-item[_ngcontent-%COMP%]{margin-bottom:1.5rem}.distribution-list[_ngcontent-%COMP%]   .distribution-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.distribution-list[_ngcontent-%COMP%]   .distribution-item[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:.5rem}.distribution-list[_ngcontent-%COMP%]   .distribution-item[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-label[_ngcontent-%COMP%]{font-weight:500;color:var(--text-primary)}.distribution-list[_ngcontent-%COMP%]   .distribution-item[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-count[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-weight:600}.distribution-list[_ngcontent-%COMP%]   .distribution-item[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{height:8px;background:var(--ion-color-light);border-radius:4px;overflow:hidden}.distribution-list[_ngcontent-%COMP%]   .distribution-item[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,var(--ion-color-primary),var(--ion-color-primary-tint));transition:width .3s ease}.recent-list[_ngcontent-%COMP%]   .recent-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem 0;border-bottom:1px solid var(--border-color)}.recent-list[_ngcontent-%COMP%]   .recent-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.recent-list[_ngcontent-%COMP%]   .recent-item.overdue[_ngcontent-%COMP%]{background:#eb445a0d;padding:1rem;border-radius:8px;margin-bottom:.5rem;border-bottom:none}.recent-list[_ngcontent-%COMP%]   .recent-item.overdue[_ngcontent-%COMP%]   .recent-date[_ngcontent-%COMP%]{color:var(--ion-color-danger);font-weight:600}.recent-list[_ngcontent-%COMP%]   .recent-item[_ngcontent-%COMP%]   .recent-info[_ngcontent-%COMP%]{flex:1}.recent-list[_ngcontent-%COMP%]   .recent-item[_ngcontent-%COMP%]   .recent-info[_ngcontent-%COMP%]   .asset-name[_ngcontent-%COMP%]{font-weight:600;color:var(--text-primary);margin-bottom:.25rem}.recent-list[_ngcontent-%COMP%]   .recent-item[_ngcontent-%COMP%]   .recent-info[_ngcontent-%COMP%]   .employee-name[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-secondary)}.recent-list[_ngcontent-%COMP%]   .recent-item[_ngcontent-%COMP%]   .recent-date[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-secondary);text-align:right}.warning-card[_ngcontent-%COMP%]{border-left:4px solid var(--ion-color-danger)}.warning-card[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:var(--ion-color-danger)}']})}}return n})()}}]);