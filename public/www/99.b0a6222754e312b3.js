"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[99],{5099:(E,d,o)=>{o.r(d),o.d(d,{LeavesPage:()=>C});var a=o(9907),r=o(177),_=o(2951),l=o(5873),e=o(4438),m=o(7599),v=o(3799);const u=(t,s,n,i)=>({primary:t,success:s,warning:n,danger:i});function p(t,s){if(1&t&&(e.j41(0,"div",12)(1,"div",13),e.nrm(2,"ion-icon",14),e.k0s(),e.j41(3,"div",15)(4,"p",16),e.EFF(5),e.j41(6,"span"),e.EFF(7),e.k0s()(),e.j41(8,"p",17),e.EFF(9),e.k0s(),e.j41(10,"p",18),e.EFF(11),e.k0s()()()),2&t){const n=s.$implicit,i=e.XpG(2);e.R7$(),e.Y8G("ngClass",e.ziG(6,u,"AL"===n.type_code||"PL"===n.type_code,"SL"===n.type_code||"ML"===n.type_code,"CL"===n.type_code,"LWP"===n.type_code||"UL"===n.type_code)),e.R7$(),e.Y8G("name",i.getLeaveIcon(n.type_code)),e.R7$(3),e.JRh(n.used_days||0),e.R7$(2),e.SpI("/",n.allocated_days||0,""),e.R7$(2),e.JRh(n.type_name||n.leave_type_name),e.R7$(2),e.SpI("",n.available_days||0," remaining")}}function f(t,s){if(1&t&&(e.j41(0,"div",10),e.DNE(1,p,12,11,"div",11),e.k0s()),2&t){const n=e.XpG();e.R7$(),e.Y8G("ngForOf",n.leaveBalances)}}function P(t,s){1&t&&(e.j41(0,"div",19),e.nrm(1,"ion-icon",20),e.j41(2,"p"),e.EFF(3,"No leave balance data available"),e.k0s()())}function h(t,s){if(1&t){const n=e.RV6();e.j41(0,"ion-card")(1,"ion-card-content",19),e.nrm(2,"ion-icon",21),e.j41(3,"p"),e.EFF(4,"No leave requests found"),e.k0s(),e.j41(5,"ion-button",8),e.bIt("click",function(){e.eBV(n);const c=e.XpG();return e.Njj(c.requestLeave())}),e.EFF(6," Request Leave "),e.k0s()()()}}function M(t,s){if(1&t&&(e.j41(0,"ion-item",23),e.nrm(1,"ion-icon",24),e.j41(2,"ion-label")(3,"h3"),e.EFF(4),e.k0s(),e.j41(5,"p"),e.EFF(6),e.nI1(7,"date"),e.nI1(8,"date"),e.k0s(),e.j41(9,"p"),e.EFF(10),e.k0s()(),e.j41(11,"ion-badge",25),e.EFF(12),e.nI1(13,"titlecase"),e.k0s()()),2&t){const n=s.$implicit,i=e.XpG(2);e.R7$(),e.Y8G("name",i.getStatusIcon(n.status))("color",i.getStatusColor(n.status)),e.R7$(3),e.JRh(n.type_name||n.leaveType||"Leave"),e.R7$(2),e.Lme("",e.i5U(7,9,n.start_date,"MMM d")," - ",e.i5U(8,12,n.end_date,"MMM d, y"),""),e.R7$(4),e.Lme("",n.total_days||n.days," day(s) \u2022 ",n.reason,""),e.R7$(),e.Y8G("color",i.getStatusColor(n.status)),e.R7$(),e.SpI(" ",e.bMT(13,15,n.status)," ")}}function O(t,s){if(1&t&&(e.j41(0,"ion-card")(1,"ion-list"),e.DNE(2,M,14,17,"ion-item",22),e.k0s()()),2&t){const n=e.XpG();e.R7$(2),e.Y8G("ngForOf",n.leaves)}}let C=(()=>{class t{constructor(n,i){this.leaveService=n,this.router=i,this.leaves=[],this.leaveBalance=null,this.leaveBalances=[],(0,_.d)({addOutline:l.EKF,documentTextOutline:l.pXZ,checkmarkCircleOutline:l.gz2,closeCircleOutline:l.p9N,timeOutline:l.CVk,sunnyOutline:l.M8s,medicalOutline:l.yze,homeOutline:l.Ud0})}ngOnInit(){this.loadData()}loadData(){this.leaveService.getLeaves().subscribe({next:n=>this.leaves=n}),this.leaveService.getLeaveBalance().subscribe({next:n=>{this.leaveBalance=n,n.balances&&Array.isArray(n.balances)?this.leaveBalances=n.balances:n.leave_balances&&Array.isArray(n.leave_balances)?this.leaveBalances=n.leave_balances:Array.isArray(n)&&(this.leaveBalances=n)}})}handleRefresh(n){this.loadData(),setTimeout(()=>n.target.complete(),1e3)}getStatusColor(n){return{pending:"warning",approved:"success",rejected:"danger"}[n]||"medium"}getStatusIcon(n){return{pending:"time-outline",approved:"checkmark-circle-outline",rejected:"close-circle-outline"}[n]||"time-outline"}requestLeave(){this.router.navigate(["/leave-request"])}getLeaveIcon(n){return{AL:"sunny-outline",PL:"sunny-outline",SL:"medical-outline",ML:"medical-outline",CL:"home-outline",LWP:"close-circle-outline",UL:"close-circle-outline"}[n]||"calendar-outline"}static{this.\u0275fac=function(i){return new(i||t)(e.rXU(m.P),e.rXU(v.Ix))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-leaves"]],standalone:!0,features:[e.aNF],decls:24,vars:5,consts:[["noLeaveData",""],[3,"fullscreen"],["slot","fixed",3,"ionRefresh"],[1,"leaves-container"],["class","leave-grid",4,"ngIf","ngIfElse"],[1,"section-title"],[4,"ngIf"],["slot","fixed","vertical","bottom","horizontal","end"],[3,"click"],["name","add-outline"],[1,"leave-grid"],["class","leave-type-item",4,"ngFor","ngForOf"],[1,"leave-type-item"],[1,"leave-icon",3,"ngClass"],[3,"name"],[1,"leave-info"],[1,"leave-count"],[1,"leave-name"],[1,"leave-remaining"],[1,"empty-state"],["name","calendar-outline","size","large"],["name","document-text-outline","size","large"],["lines","full",4,"ngFor","ngForOf"],["lines","full"],["slot","start",3,"name","color"],["slot","end",3,"color"]],template:function(i,c){if(1&i){const g=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Leave Management"),e.k0s()()(),e.j41(4,"ion-content",1)(5,"ion-refresher",2),e.bIt("ionRefresh",function(y){return e.eBV(g),e.Njj(c.handleRefresh(y))}),e.nrm(6,"ion-refresher-content"),e.k0s(),e.j41(7,"div",3)(8,"ion-card")(9,"ion-card-header")(10,"ion-card-title"),e.EFF(11,"Leave Balance"),e.k0s()(),e.j41(12,"ion-card-content"),e.DNE(13,f,2,1,"div",4)(14,P,4,0,"ng-template",null,0,e.C5r),e.k0s()(),e.j41(16,"div",5)(17,"h2"),e.EFF(18,"Leave Requests"),e.k0s()(),e.DNE(19,h,7,0,"ion-card",6)(20,O,3,1,"ion-card",6),e.k0s(),e.j41(21,"ion-fab",7)(22,"ion-fab-button",8),e.bIt("click",function(){return e.eBV(g),e.Njj(c.requestLeave())}),e.nrm(23,"ion-icon",9),e.k0s()()()}if(2&i){const g=e.sdS(15);e.R7$(4),e.Y8G("fullscreen",!0),e.R7$(9),e.Y8G("ngIf",c.leaveBalances.length>0)("ngIfElse",g),e.R7$(6),e.Y8G("ngIf",0===c.leaves.length),e.R7$(),e.Y8G("ngIf",c.leaves.length>0)}},dependencies:[r.MD,r.YU,r.Sq,r.bT,r.PV,r.vh,a.W9,a.eU,a.BC,a.ai,a.Jm,a.b_,a.I9,a.ME,a.tN,a.nf,a.uz,a.he,a.In,a.iq,a.Q8,a.YW,a.To,a.Ki],styles:[".leaves-container[_ngcontent-%COMP%]{padding:1rem;padding-bottom:80px;max-width:1200px;margin:0 auto}.leave-grid[_ngcontent-%COMP%]{display:grid;gap:16px;grid-template-columns:repeat(auto-fill,minmax(250px,1fr))}.leave-type-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:16px;border-radius:12px;background:#f8f9fa}.leave-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:12px;flex-shrink:0;display:flex;align-items:center;justify-content:center}.leave-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px;color:#fff}.leave-icon.primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2)}.leave-icon.success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669)}.leave-icon.warning[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#d97706)}.leave-icon.danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444,#dc2626)}.leave-info[_ngcontent-%COMP%]{flex:1}.leave-count[_ngcontent-%COMP%]{margin:0 0 4px;font-size:20px;font-weight:700;color:#1e293b}.leave-count[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;color:#94a3b8;font-weight:600}.leave-name[_ngcontent-%COMP%]{margin:0;font-size:13px;color:#64748b;font-weight:500}.leave-remaining[_ngcontent-%COMP%]{margin:4px 0 0;font-size:12px;color:#10b981;font-weight:600}.section-title[_ngcontent-%COMP%]{margin:1.5rem 0 1rem}.section-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;margin:0}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:3rem 1rem}.empty-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-medium);margin-bottom:1rem}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--ion-color-medium);margin-bottom:1.5rem}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:600;margin-bottom:.25rem}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.85rem;color:var(--ion-color-medium);margin:.25rem 0}"]})}}return t})()}}]);