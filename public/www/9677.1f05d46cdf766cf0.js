"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9677],{9677:(C,g,i)=>{i.r(g),i.d(g,{LeavePlansPage:()=>L});var m=i(467),_=i(177),d=i(4341),t=i(7820),P=i(2951),r=i(5873),n=i(4438),u=i(7097),f=i(3799);function v(o,c){if(1&o&&(n.j41(0,"p"),n.EFF(1),n.k0s()),2&o){const e=n.XpG().$implicit;n.R7$(),n.JRh(e.description)}}function h(o,c){if(1&o){const e=n.RV6();n.j41(0,"ion-item",11),n.bIt("click",function(){const a=n.eBV(e).$implicit,l=n.XpG(2);return n.Njj(l.viewPlan(a))}),n.nrm(1,"ion-icon",12),n.j41(2,"ion-label")(3,"h2"),n.EFF(4),n.k0s(),n.DNE(5,v,2,1,"p",7),n.j41(6,"p")(7,"ion-badge",13),n.EFF(8),n.k0s(),n.j41(9,"ion-badge",14),n.EFF(10),n.k0s()()(),n.j41(11,"ion-badge",15),n.EFF(12),n.k0s()()}if(2&o){const e=c.$implicit;n.R7$(),n.Y8G("color",e.is_active?"primary":"medium"),n.R7$(3),n.JRh(e.name),n.R7$(),n.Y8G("ngIf",e.description),n.R7$(3),n.SpI("",e.leave_types_count||0," Leave Types"),n.R7$(2),n.SpI(" ",e.employees_count||0," Employees "),n.R7$(),n.Y8G("color",e.is_active?"success":"medium"),n.R7$(),n.SpI(" ",e.is_active?"Active":"Inactive"," ")}}function E(o,c){if(1&o&&(n.j41(0,"ion-list"),n.DNE(1,h,13,7,"ion-item",10),n.k0s()),2&o){const e=n.XpG();n.R7$(),n.Y8G("ngForOf",e.plans)}}function O(o,c){1&o&&(n.j41(0,"div",16),n.nrm(1,"ion-icon",17),n.j41(2,"h2"),n.EFF(3,"No Leave Plans"),n.k0s(),n.j41(4,"p"),n.EFF(5,"No leave plans found"),n.k0s()())}function M(o,c){1&o&&(n.j41(0,"div",18),n.nrm(1,"ion-spinner",19),n.j41(2,"p"),n.EFF(3,"Loading leave plans..."),n.k0s()())}let L=(()=>{class o{constructor(e,s,a,l){this.leavePlanService=e,this.router=s,this.alertController=a,this.toastController=l,this.plans=[],this.isLoading=!1,(0,P.d)({addOutline:r.EKF,createOutline:r.hmR,peopleOutline:r.wx_,calendarOutline:r.RXF,refreshOutline:r.mVv})}ngOnInit(){this.loadPlans()}loadPlans(){console.log("=== Loading leave plans ==="),this.isLoading=!0,this.leavePlanService.getLeavePlans().subscribe({next:e=>{console.log("Leave plans response:",e),console.log("Number of plans:",e?.length||0),this.plans=e,this.isLoading=!1},error:e=>{console.error("Error loading leave plans:",e),console.error("Error details:",e.message,e.status),this.showToast("Error loading leave plans","danger"),this.isLoading=!1}})}handleRefresh(e){this.loadPlans(),setTimeout(()=>e.target.complete(),1e3)}viewPlan(e){this.router.navigate(["/admin/leave-plans",e.id])}showToast(e){var s=this;return(0,m.A)(function*(a,l="primary"){yield(yield s.toastController.create({message:a,duration:2e3,color:l,position:"top"})).present()}).apply(this,arguments)}static{this.\u0275fac=function(s){return new(s||o)(n.rXU(u.c),n.rXU(f.Ix),n.rXU(t.hG),n.rXU(t.K_))}}static{this.\u0275cmp=n.VBU({type:o,selectors:[["app-leave-plans"]],standalone:!0,features:[n.aNF],decls:15,vars:3,consts:[["color","primary"],["slot","start"],["defaultHref","/admin/dashboard"],["slot","end"],[3,"click"],["slot","icon-only","name","refresh-outline"],["slot","fixed",3,"ionRefresh"],[4,"ngIf"],["class","empty-state",4,"ngIf"],["class","loading-state",4,"ngIf"],["button","","lines","full",3,"click",4,"ngFor","ngForOf"],["button","","lines","full",3,"click"],["slot","start","name","calendar-outline",3,"color"],["color","success"],["color","primary",2,"margin-left","8px"],["slot","end",3,"color"],[1,"empty-state"],["name","calendar-outline","color","medium"],[1,"loading-state"],["name","crescent","color","primary"]],template:function(s,a){1&s&&(n.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),n.nrm(3,"ion-back-button",2),n.k0s(),n.j41(4,"ion-title"),n.EFF(5,"Leave Plans"),n.k0s(),n.j41(6,"ion-buttons",3)(7,"ion-button",4),n.bIt("click",function(){return a.loadPlans()}),n.nrm(8,"ion-icon",5),n.k0s()()()(),n.j41(9,"ion-content")(10,"ion-refresher",6),n.bIt("ionRefresh",function(p){return a.handleRefresh(p)}),n.nrm(11,"ion-refresher-content"),n.k0s(),n.DNE(12,E,2,1,"ion-list",7)(13,O,6,0,"div",8)(14,M,4,0,"div",9),n.k0s()),2&s&&(n.R7$(12),n.Y8G("ngIf",!a.isLoading&&a.plans.length>0),n.R7$(),n.Y8G("ngIf",!a.isLoading&&0===a.plans.length),n.R7$(),n.Y8G("ngIf",a.isLoading))},dependencies:[_.MD,_.Sq,_.bT,d.YN,t.W9,t.eU,t.BC,t.ai,t.QW,t.el,t.nf,t.uz,t.he,t.In,t.Jm,t.iq,t.To,t.Ki,t.w2],styles:[".empty-state[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center}.empty-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:80px;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 8px;font-size:20px;font-weight:600}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--ion-color-medium)}.empty-state[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{transform:scale(1.5);margin-bottom:20px}"]})}}return o})()}}]);