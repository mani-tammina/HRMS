"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9985],{9985:(D,d,s)=>{s.r(d),s.d(d,{PayrollAdminPage:()=>N});var p=s(177),_=s(4341),r=s(5312),c=s(7820),e=s(4438),g=s(1626);function u(i,a){if(1&i){const t=e.RV6();e.j41(0,"ion-item")(1,"ion-label")(2,"b"),e.EFF(3),e.k0s(),e.EFF(4),e.j41(5,"span",31),e.EFF(6),e.k0s()(),e.j41(7,"ion-badge",32),e.EFF(8),e.k0s(),e.j41(9,"ion-button",33),e.bIt("click",function(){const o=e.eBV(t).$implicit,n=e.XpG(2);return e.Njj(n.updateComponent(o.id))}),e.EFF(10,"Edit"),e.k0s(),e.j41(11,"ion-button",34),e.bIt("click",function(){const o=e.eBV(t).$implicit,n=e.XpG(2);return e.Njj(n.deleteComponent(o.id))}),e.EFF(12,"Delete"),e.k0s()()}if(2&i){const t=a.$implicit;e.R7$(3),e.JRh(t.code),e.R7$(),e.SpI(" - ",t.name," "),e.R7$(2),e.SpI("(",t.type,")"),e.R7$(2),e.JRh(t.is_active?"Active":"Inactive")}}function F(i,a){if(1&i){const t=e.RV6();e.j41(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),e.EFF(3,"Salary Components"),e.k0s(),e.j41(4,"p"),e.EFF(5,"Define all possible salary components (earnings, deductions, contributions, reimbursements)."),e.k0s()(),e.j41(6,"ion-card-content")(7,"form",13),e.bIt("ngSubmit",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.addComponent())}),e.j41(8,"ion-row")(9,"ion-col",14)(10,"ion-input",15),e.mxI("ngModelChange",function(o){e.eBV(t);const n=e.XpG();return e.DH7(n.componentForm.code,o)||(n.componentForm.code=o),e.Njj(o)}),e.k0s()(),e.j41(11,"ion-col",14)(12,"ion-input",16),e.mxI("ngModelChange",function(o){e.eBV(t);const n=e.XpG();return e.DH7(n.componentForm.name,o)||(n.componentForm.name=o),e.Njj(o)}),e.k0s()(),e.j41(13,"ion-col",17)(14,"ion-input",18),e.mxI("ngModelChange",function(o){e.eBV(t);const n=e.XpG();return e.DH7(n.componentForm.description,o)||(n.componentForm.description=o),e.Njj(o)}),e.k0s()(),e.j41(15,"ion-col",14)(16,"ion-select",19),e.mxI("ngModelChange",function(o){e.eBV(t);const n=e.XpG();return e.DH7(n.componentForm.type,o)||(n.componentForm.type=o),e.Njj(o)}),e.j41(17,"ion-select-option",20),e.EFF(18,"Earning"),e.k0s(),e.j41(19,"ion-select-option",21),e.EFF(20,"Deduction"),e.k0s(),e.j41(21,"ion-select-option",22),e.EFF(22,"Contribution"),e.k0s(),e.j41(23,"ion-select-option",23),e.EFF(24,"Reimbursement"),e.k0s()()(),e.j41(25,"ion-col",24)(26,"ion-select",25),e.mxI("ngModelChange",function(o){e.eBV(t);const n=e.XpG();return e.DH7(n.componentForm.is_taxable,o)||(n.componentForm.is_taxable=o),e.Njj(o)}),e.j41(27,"ion-select-option",26),e.EFF(28,"Yes"),e.k0s(),e.j41(29,"ion-select-option",26),e.EFF(30,"No"),e.k0s()()(),e.j41(31,"ion-col",24)(32,"ion-select",27),e.mxI("ngModelChange",function(o){e.eBV(t);const n=e.XpG();return e.DH7(n.componentForm.is_active,o)||(n.componentForm.is_active=o),e.Njj(o)}),e.j41(33,"ion-select-option",26),e.EFF(34,"Yes"),e.k0s(),e.j41(35,"ion-select-option",26),e.EFF(36,"No"),e.k0s()()(),e.j41(37,"ion-col",24)(38,"ion-button",28),e.EFF(39,"Add"),e.k0s()()()(),e.j41(40,"ion-list",29),e.DNE(41,u,13,4,"ion-item",30),e.k0s()()()}if(2&i){const t=e.XpG();e.R7$(10),e.R50("ngModel",t.componentForm.code),e.R7$(2),e.R50("ngModel",t.componentForm.name),e.R7$(2),e.R50("ngModel",t.componentForm.description),e.R7$(2),e.R50("ngModel",t.componentForm.type),e.R7$(10),e.R50("ngModel",t.componentForm.is_taxable),e.R7$(),e.Y8G("value",!0),e.R7$(2),e.Y8G("value",!1),e.R7$(3),e.R50("ngModel",t.componentForm.is_active),e.R7$(),e.Y8G("value",!0),e.R7$(2),e.Y8G("value",!1),e.R7$(6),e.Y8G("ngForOf",t.components)}}function h(i,a){if(1&i){const t=e.RV6();e.j41(0,"ion-item")(1,"ion-label")(2,"b"),e.EFF(3),e.k0s(),e.j41(4,"span",31),e.EFF(5),e.k0s()(),e.j41(6,"ion-badge",32),e.EFF(7),e.k0s(),e.j41(8,"ion-button",33),e.bIt("click",function(){const o=e.eBV(t).$implicit,n=e.XpG(2);return e.Njj(n.updateTemplate(o.id))}),e.EFF(9,"Edit"),e.k0s(),e.j41(10,"ion-button",34),e.bIt("click",function(){const o=e.eBV(t).$implicit,n=e.XpG(2);return e.Njj(n.deleteTemplate(o.id))}),e.EFF(11,"Delete"),e.k0s(),e.j41(12,"ion-button",38),e.bIt("click",function(){const o=e.eBV(t).$implicit,n=e.XpG(2);return e.Njj(n.selectTemplate(o))}),e.EFF(13,"Build"),e.k0s()()}if(2&i){const t=a.$implicit;e.R7$(3),e.JRh(t.template_name),e.R7$(2),e.JRh(t.description),e.R7$(2),e.JRh(t.is_active?"Active":"Inactive")}}function j(i,a){if(1&i){const t=e.RV6();e.j41(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),e.EFF(3,"Salary Structure Templates"),e.k0s(),e.j41(4,"p"),e.EFF(5,"Create reusable templates for salary structures (e.g., Standard, Executive, Contractual)."),e.k0s()(),e.j41(6,"ion-card-content")(7,"form",13),e.bIt("ngSubmit",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.addTemplate())}),e.j41(8,"ion-row")(9,"ion-col",35)(10,"ion-input",36),e.mxI("ngModelChange",function(o){e.eBV(t);const n=e.XpG();return e.DH7(n.templateForm.template_name,o)||(n.templateForm.template_name=o),e.Njj(o)}),e.k0s()(),e.j41(11,"ion-col",37)(12,"ion-input",18),e.mxI("ngModelChange",function(o){e.eBV(t);const n=e.XpG();return e.DH7(n.templateForm.description,o)||(n.templateForm.description=o),e.Njj(o)}),e.k0s()(),e.j41(13,"ion-col",14)(14,"ion-select",27),e.mxI("ngModelChange",function(o){e.eBV(t);const n=e.XpG();return e.DH7(n.templateForm.is_active,o)||(n.templateForm.is_active=o),e.Njj(o)}),e.j41(15,"ion-select-option",26),e.EFF(16,"Yes"),e.k0s(),e.j41(17,"ion-select-option",26),e.EFF(18,"No"),e.k0s()()(),e.j41(19,"ion-col",24)(20,"ion-button",28),e.EFF(21,"Add"),e.k0s()()()(),e.j41(22,"ion-list",29),e.DNE(23,h,14,3,"ion-item",30),e.k0s()()()}if(2&i){const t=e.XpG();e.R7$(10),e.R50("ngModel",t.templateForm.template_name),e.R7$(2),e.R50("ngModel",t.templateForm.description),e.R7$(2),e.R50("ngModel",t.templateForm.is_active),e.R7$(),e.Y8G("value",!0),e.R7$(2),e.Y8G("value",!1),e.R7$(6),e.Y8G("ngForOf",t.templates)}}function b(i,a){if(1&i&&(e.j41(0,"ion-select-option",26),e.EFF(1),e.k0s()),2&i){const t=a.$implicit;e.Y8G("value",t.id),e.R7$(),e.JRh(t.name)}}function P(i,a){if(1&i){const t=e.RV6();e.j41(0,"ion-item")(1,"ion-label")(2,"b"),e.EFF(3),e.k0s(),e.j41(4,"span",31),e.EFF(5),e.k0s()(),e.j41(6,"ion-badge",32),e.EFF(7),e.k0s(),e.j41(8,"ion-button",33),e.bIt("click",function(){const o=e.eBV(t).$implicit,n=e.XpG(3);return e.Njj(n.updateComposition(n.selectedTemplate.id,o.id))}),e.EFF(9,"Edit"),e.k0s(),e.j41(10,"ion-button",34),e.bIt("click",function(){const o=e.eBV(t).$implicit,n=e.XpG(3);return e.Njj(n.deleteComposition(n.selectedTemplate.id,o.id))}),e.EFF(11,"Delete"),e.k0s()()}if(2&i){const t=a.$implicit;e.R7$(3),e.JRh(t.name),e.R7$(2),e.Lme("(",t.amount_type,": ",t.value,")"),e.R7$(2),e.JRh(t.is_active?"Active":"Inactive")}}function y(i,a){if(1&i){const t=e.RV6();e.qex(0),e.j41(1,"h3"),e.EFF(2),e.k0s(),e.j41(3,"form",13),e.bIt("ngSubmit",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.addComposition(o.selectedTemplate.id))}),e.j41(4,"ion-row")(5,"ion-col",17)(6,"ion-select",40),e.mxI("ngModelChange",function(o){e.eBV(t);const n=e.XpG(2);return e.DH7(n.compositionForm.component_id,o)||(n.compositionForm.component_id=o),e.Njj(o)}),e.DNE(7,b,2,2,"ion-select-option",41),e.k0s()(),e.j41(8,"ion-col",14)(9,"ion-select",42),e.mxI("ngModelChange",function(o){e.eBV(t);const n=e.XpG(2);return e.DH7(n.compositionForm.amount_type,o)||(n.compositionForm.amount_type=o),e.Njj(o)}),e.j41(10,"ion-select-option",43),e.EFF(11,"Fixed"),e.k0s(),e.j41(12,"ion-select-option",44),e.EFF(13,"Percentage"),e.k0s()()(),e.j41(14,"ion-col",14)(15,"ion-input",45),e.mxI("ngModelChange",function(o){e.eBV(t);const n=e.XpG(2);return e.DH7(n.compositionForm.value,o)||(n.compositionForm.value=o),e.Njj(o)}),e.k0s()(),e.j41(16,"ion-col",14)(17,"ion-input",46),e.mxI("ngModelChange",function(o){e.eBV(t);const n=e.XpG(2);return e.DH7(n.compositionForm.sort_order,o)||(n.compositionForm.sort_order=o),e.Njj(o)}),e.k0s()(),e.j41(18,"ion-col",14)(19,"ion-select",27),e.mxI("ngModelChange",function(o){e.eBV(t);const n=e.XpG(2);return e.DH7(n.compositionForm.is_active,o)||(n.compositionForm.is_active=o),e.Njj(o)}),e.j41(20,"ion-select-option",26),e.EFF(21,"Yes"),e.k0s(),e.j41(22,"ion-select-option",26),e.EFF(23,"No"),e.k0s()()(),e.j41(24,"ion-col",24)(25,"ion-button",28),e.EFF(26,"Add"),e.k0s()()()(),e.j41(27,"ion-list",29),e.DNE(28,P,12,4,"ion-item",30),e.k0s(),e.bVm()}if(2&i){const t=e.XpG(2);e.R7$(2),e.JRh(t.selectedTemplate.template_name),e.R7$(4),e.R50("ngModel",t.compositionForm.component_id),e.R7$(),e.Y8G("ngForOf",t.components),e.R7$(2),e.R50("ngModel",t.compositionForm.amount_type),e.R7$(6),e.R50("ngModel",t.compositionForm.value),e.R7$(2),e.R50("ngModel",t.compositionForm.sort_order),e.R7$(2),e.R50("ngModel",t.compositionForm.is_active),e.R7$(),e.Y8G("value",!0),e.R7$(2),e.Y8G("value",!1),e.R7$(6),e.Y8G("ngForOf",t.composition)}}function f(i,a){1&i&&(e.j41(0,"ion-card",47)(1,"ion-card-content")(2,"p"),e.EFF(3,"Please select a template in the Templates tab to build its composition."),e.k0s()()())}function k(i,a){if(1&i&&(e.j41(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),e.EFF(3,"Template Builder"),e.k0s(),e.j41(4,"p"),e.EFF(5,"Assign components and rules to the selected template."),e.k0s()(),e.j41(6,"ion-card-content"),e.DNE(7,y,29,10,"ng-container",39)(8,f,4,0,"ng-template",null,0,e.C5r),e.k0s()()),2&i){const t=e.sdS(9),l=e.XpG();e.R7$(7),e.Y8G("ngIf",l.selectedTemplate)("ngIfElse",t)}}function M(i,a){if(1&i&&(e.j41(0,"ion-select-option",26),e.EFF(1),e.k0s()),2&i){const t=a.$implicit;e.Y8G("value",t.id),e.R7$(),e.JRh(t.template_name)}}function R(i,a){if(1&i){const t=e.RV6();e.j41(0,"ion-item")(1,"ion-label")(2,"b"),e.EFF(3),e.k0s(),e.EFF(4),e.j41(5,"span",31),e.EFF(6),e.k0s()(),e.j41(7,"ion-badge",32),e.EFF(8),e.k0s(),e.j41(9,"ion-button",33),e.bIt("click",function(){const o=e.eBV(t).$implicit,n=e.XpG(2);return e.Njj(n.updateContract(o.id))}),e.EFF(10,"Edit"),e.k0s(),e.j41(11,"ion-button",34),e.bIt("click",function(){const o=e.eBV(t).$implicit,n=e.XpG(2);return e.Njj(n.deleteContract(o.id))}),e.EFF(12,"Delete"),e.k0s()()}if(2&i){const t=a.$implicit;e.R7$(3),e.JRh(t.EmployeeNumber),e.R7$(),e.SpI(" - ",t.FullName," "),e.R7$(2),e.SpI("(",t.template_name,")"),e.R7$(2),e.JRh(t.is_active?"Active":"Inactive")}}function C(i,a){if(1&i){const t=e.RV6();e.j41(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),e.EFF(3,"Employee Salary Contracts"),e.k0s(),e.j41(4,"p"),e.EFF(5,"Assign templates to employees with contract periods."),e.k0s()(),e.j41(6,"ion-card-content")(7,"form",13),e.bIt("ngSubmit",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.addContract())}),e.j41(8,"ion-row")(9,"ion-col",14)(10,"ion-input",48),e.mxI("ngModelChange",function(o){e.eBV(t);const n=e.XpG();return e.DH7(n.contractForm.employee_id,o)||(n.contractForm.employee_id=o),e.Njj(o)}),e.k0s()(),e.j41(11,"ion-col",17)(12,"ion-select",49),e.mxI("ngModelChange",function(o){e.eBV(t);const n=e.XpG();return e.DH7(n.contractForm.template_id,o)||(n.contractForm.template_id=o),e.Njj(o)}),e.DNE(13,M,2,2,"ion-select-option",41),e.k0s()(),e.j41(14,"ion-col",14)(15,"ion-input",50),e.mxI("ngModelChange",function(o){e.eBV(t);const n=e.XpG();return e.DH7(n.contractForm.contract_start_date,o)||(n.contractForm.contract_start_date=o),e.Njj(o)}),e.k0s()(),e.j41(16,"ion-col",14)(17,"ion-input",51),e.mxI("ngModelChange",function(o){e.eBV(t);const n=e.XpG();return e.DH7(n.contractForm.contract_end_date,o)||(n.contractForm.contract_end_date=o),e.Njj(o)}),e.k0s()(),e.j41(18,"ion-col",14)(19,"ion-select",27),e.mxI("ngModelChange",function(o){e.eBV(t);const n=e.XpG();return e.DH7(n.contractForm.is_active,o)||(n.contractForm.is_active=o),e.Njj(o)}),e.j41(20,"ion-select-option",26),e.EFF(21,"Yes"),e.k0s(),e.j41(22,"ion-select-option",26),e.EFF(23,"No"),e.k0s()()(),e.j41(24,"ion-col",24)(25,"ion-button",28),e.EFF(26,"Add"),e.k0s()()()(),e.j41(27,"ion-list",29),e.DNE(28,R,13,4,"ion-item",30),e.k0s()()()}if(2&i){const t=e.XpG();e.R7$(10),e.R50("ngModel",t.contractForm.employee_id),e.R7$(2),e.R50("ngModel",t.contractForm.template_id),e.R7$(),e.Y8G("ngForOf",t.templates),e.R7$(2),e.R50("ngModel",t.contractForm.contract_start_date),e.R7$(2),e.R50("ngModel",t.contractForm.contract_end_date),e.R7$(2),e.R50("ngModel",t.contractForm.is_active),e.R7$(),e.Y8G("value",!0),e.R7$(2),e.Y8G("value",!1),e.R7$(6),e.Y8G("ngForOf",t.contracts)}}function E(i,a){if(1&i){const t=e.RV6();e.j41(0,"ion-item")(1,"ion-label")(2,"b"),e.EFF(3),e.k0s(),e.j41(4,"span",31),e.EFF(5),e.k0s()(),e.j41(6,"ion-badge",32),e.EFF(7),e.k0s(),e.j41(8,"ion-button",33),e.bIt("click",function(){const o=e.eBV(t).$implicit,n=e.XpG(2);return e.Njj(n.updatePeriod(o.id))}),e.EFF(9,"Edit"),e.k0s(),e.j41(10,"ion-button",34),e.bIt("click",function(){const o=e.eBV(t).$implicit,n=e.XpG(2);return e.Njj(n.deletePeriod(o.id))}),e.EFF(11,"Delete"),e.k0s(),e.j41(12,"ion-button",60),e.bIt("click",function(){const o=e.eBV(t).$implicit,n=e.XpG(2);return e.Njj(n.runPayroll(o.id))}),e.EFF(13,"Run Payroll"),e.k0s()()}if(2&i){const t=a.$implicit,l=e.XpG(2);e.R7$(3),e.JRh(t.period_code),e.R7$(2),e.Lme("(",t.period_start," - ",t.period_end,")"),e.R7$(2),e.JRh(t.status),e.R7$(5),e.Y8G("disabled",l.loading)}}function T(i,a){if(1&i){const t=e.RV6();e.j41(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),e.EFF(3,"Payroll Periods"),e.k0s(),e.j41(4,"p"),e.EFF(5,"Define payroll periods and run payroll for each period."),e.k0s()(),e.j41(6,"ion-card-content")(7,"form",13),e.bIt("ngSubmit",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.addPeriod())}),e.j41(8,"ion-row")(9,"ion-col",14)(10,"ion-input",52),e.mxI("ngModelChange",function(o){e.eBV(t);const n=e.XpG();return e.DH7(n.periodForm.period_code,o)||(n.periodForm.period_code=o),e.Njj(o)}),e.k0s()(),e.j41(11,"ion-col",17)(12,"ion-input",53),e.mxI("ngModelChange",function(o){e.eBV(t);const n=e.XpG();return e.DH7(n.periodForm.period_start,o)||(n.periodForm.period_start=o),e.Njj(o)}),e.k0s()(),e.j41(13,"ion-col",17)(14,"ion-input",54),e.mxI("ngModelChange",function(o){e.eBV(t);const n=e.XpG();return e.DH7(n.periodForm.period_end,o)||(n.periodForm.period_end=o),e.Njj(o)}),e.k0s()(),e.j41(15,"ion-col",14)(16,"ion-select",55),e.mxI("ngModelChange",function(o){e.eBV(t);const n=e.XpG();return e.DH7(n.periodForm.status,o)||(n.periodForm.status=o),e.Njj(o)}),e.j41(17,"ion-select-option",56),e.EFF(18,"Open"),e.k0s(),e.j41(19,"ion-select-option",57),e.EFF(20,"Processing"),e.k0s(),e.j41(21,"ion-select-option",58),e.EFF(22,"Closed"),e.k0s(),e.j41(23,"ion-select-option",59),e.EFF(24,"Locked"),e.k0s()()(),e.j41(25,"ion-col",14)(26,"ion-button",28),e.EFF(27,"Add"),e.k0s()()()(),e.j41(28,"ion-list",29),e.DNE(29,E,14,5,"ion-item",30),e.k0s()()()}if(2&i){const t=e.XpG();e.R7$(10),e.R50("ngModel",t.periodForm.period_code),e.R7$(2),e.R50("ngModel",t.periodForm.period_start),e.R7$(2),e.R50("ngModel",t.periodForm.period_end),e.R7$(2),e.R50("ngModel",t.periodForm.status),e.R7$(13),e.Y8G("ngForOf",t.periods)}}function x(i,a){if(1&i){const t=e.RV6();e.j41(0,"ion-item")(1,"ion-label")(2,"b"),e.EFF(3),e.k0s(),e.EFF(4),e.j41(5,"span",31),e.EFF(6),e.k0s()(),e.j41(7,"ion-button",38),e.bIt("click",function(){const o=e.eBV(t).$implicit,n=e.XpG(2);return e.Njj(n.viewPayslipItems(o))}),e.EFF(8,"View Items"),e.k0s()()}if(2&i){const t=a.$implicit;e.R7$(3),e.JRh(t.FullName),e.R7$(),e.SpI(" (",t.EmployeeNumber,") "),e.R7$(2),e.SpI("Net Pay: \u20b9",t.net_pay,"")}}function A(i,a){if(1&i&&(e.j41(0,"ion-item")(1,"ion-label")(2,"b"),e.EFF(3),e.k0s(),e.EFF(4),e.k0s()()),2&i){const t=a.$implicit;e.R7$(3),e.JRh(t.name),e.R7$(),e.Lme(" (",t.component_type,"): \u20b9",t.amount,"")}}function G(i,a){if(1&i&&(e.j41(0,"div")(1,"h3"),e.EFF(2,"Itemized Payslip"),e.k0s(),e.j41(3,"ion-list",29),e.DNE(4,A,5,3,"ion-item",30),e.k0s()()),2&i){const t=e.XpG(2);e.R7$(4),e.Y8G("ngForOf",t.payslipItems)}}function I(i,a){if(1&i&&(e.j41(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),e.EFF(3,"Payslips"),e.k0s(),e.j41(4,"p"),e.EFF(5,"View generated payslips and their breakdown."),e.k0s()(),e.j41(6,"ion-card-content")(7,"ion-list",29),e.DNE(8,x,9,3,"ion-item",30),e.k0s(),e.DNE(9,G,5,1,"div",12),e.k0s()()),2&i){const t=e.XpG();e.R7$(8),e.Y8G("ngForOf",t.payslips),e.R7$(),e.Y8G("ngIf",t.selectedPayslip)}}let N=(()=>{class i{constructor(t){this.http=t,this.components=[],this.componentForm={code:"",name:"",description:"",type:"earning",is_taxable:!0,is_active:!0},this.templates=[],this.templateForm={template_name:"",description:"",is_active:!0},this.selectedTemplate=null,this.composition=[],this.compositionForm={component_id:"",amount_type:"fixed",value:0,sort_order:1,is_active:!0},this.contracts=[],this.contractForm={employee_id:"",template_id:"",contract_start_date:"",contract_end_date:"",is_active:!0},this.periods=[],this.periodForm={period_code:"",period_start:"",period_end:"",status:"open"},this.payslips=[],this.payslipItems=[],this.selectedPayslip=null,this.tab="components",this.loading=!1}ngOnInit(){this.loadAll()}loadAll(){this.getComponents(),this.getTemplates(),this.getContracts(),this.getPeriods(),this.getPayslips()}getComponents(){this.http.get(r.c.apiUrl+"/payroll/components").subscribe(t=>this.components=t)}addComponent(){this.http.post(r.c.apiUrl+"/payroll/components",this.componentForm).subscribe(()=>{this.getComponents(),this.componentForm={code:"",name:"",description:"",type:"earning",is_taxable:!0,is_active:!0}})}updateComponent(t){this.http.put(r.c.apiUrl+"/payroll/components/"+t,this.componentForm).subscribe(()=>this.getComponents())}deleteComponent(t){this.http.delete(r.c.apiUrl+"/payroll/components/"+t).subscribe(()=>this.getComponents())}getTemplates(){this.http.get(r.c.apiUrl+"/payroll/templates").subscribe(t=>this.templates=t)}addTemplate(){this.http.post(r.c.apiUrl+"/payroll/templates",this.templateForm).subscribe(()=>{this.getTemplates(),this.templateForm={template_name:"",description:"",is_active:!0}})}updateTemplate(t){this.http.put(r.c.apiUrl+"/payroll/templates/"+t,this.templateForm).subscribe(()=>this.getTemplates())}deleteTemplate(t){this.http.delete(r.c.apiUrl+"/payroll/templates/"+t).subscribe(()=>this.getTemplates())}selectTemplate(t){this.selectedTemplate=t,this.getComposition(t.id)}getComposition(t){this.http.get(r.c.apiUrl+"/payroll/template/"+t+"/components").subscribe(l=>this.composition=l)}addComposition(t){this.http.post(r.c.apiUrl+"/payroll/template/"+t+"/components",this.compositionForm).subscribe(()=>{this.getComposition(t),this.compositionForm={component_id:"",amount_type:"fixed",value:0,sort_order:1,is_active:!0}})}updateComposition(t,l){this.http.put(r.c.apiUrl+"/payroll/template/"+t+"/components/"+l,this.compositionForm).subscribe(()=>this.getComposition(t))}deleteComposition(t,l){this.http.delete(r.c.apiUrl+"/payroll/template/"+t+"/components/"+l).subscribe(()=>this.getComposition(t))}getContracts(){this.http.get(r.c.apiUrl+"/payroll/contracts").subscribe(t=>this.contracts=t)}addContract(){this.http.post(r.c.apiUrl+"/payroll/contracts",this.contractForm).subscribe(()=>{this.getContracts(),this.contractForm={employee_id:"",template_id:"",contract_start_date:"",contract_end_date:"",is_active:!0}})}updateContract(t){this.http.put(r.c.apiUrl+"/payroll/contracts/"+t,this.contractForm).subscribe(()=>this.getContracts())}deleteContract(t){this.http.delete(r.c.apiUrl+"/payroll/contracts/"+t).subscribe(()=>this.getContracts())}getPeriods(){this.http.get(r.c.apiUrl+"/payroll/periods").subscribe(t=>this.periods=t)}addPeriod(){this.http.post(r.c.apiUrl+"/payroll/periods",this.periodForm).subscribe(()=>{this.getPeriods(),this.periodForm={period_code:"",period_start:"",period_end:"",status:"open"}})}updatePeriod(t){this.http.put(r.c.apiUrl+"/payroll/periods/"+t,this.periodForm).subscribe(()=>this.getPeriods())}deletePeriod(t){this.http.delete(r.c.apiUrl+"/payroll/periods/"+t).subscribe(()=>this.getPeriods())}getPayslips(){this.http.get(r.c.apiUrl+"/payroll/payslips").subscribe(t=>this.payslips=t)}viewPayslipItems(t){this.selectedPayslip=t,this.http.get(r.c.apiUrl+"/payroll/payslips/"+t.id+"/items").subscribe(l=>this.payslipItems=l)}runPayroll(t){this.loading=!0,this.http.post(r.c.apiUrl+"/payroll/run",{period_id:t}).subscribe({next:()=>{this.getPayslips(),this.loading=!1},error:()=>{this.loading=!1}})}static{this.\u0275fac=function(l){return new(l||i)(e.rXU(g.Qq))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-payroll-admin"]],standalone:!0,features:[e.aNF],decls:34,vars:7,consts:[["selectTemplateMsg",""],["color","primary"],["color","secondary",3,"ngModelChange","ngModel"],["value","components"],["value","templates"],["value","composition"],["value","contracts"],["value","periods"],["value","payslips"],[1,"modern-payroll-admin"],["fixed",""],["size","12"],[4,"ngIf"],[1,"form-inline",3,"ngSubmit"],["size","2"],["name","code","label","Code","placeholder","Code",3,"ngModelChange","ngModel"],["name","name","label","Name","placeholder","Name",3,"ngModelChange","ngModel"],["size","3"],["name","description","label","Description","placeholder","Description",3,"ngModelChange","ngModel"],["name","type","label","Type",3,"ngModelChange","ngModel"],["value","earning"],["value","deduction"],["value","contribution"],["value","reimbursement"],["size","1"],["name","is_taxable","label","Taxable",3,"ngModelChange","ngModel"],[3,"value"],["name","is_active","label","Active",3,"ngModelChange","ngModel"],["expand","block","type","submit","color","success"],["lines","full"],[4,"ngFor","ngForOf"],[1,"muted"],["color","medium","slot","end"],["size","small",3,"click"],["size","small","color","danger",3,"click"],["size","4"],["name","template_name","label","Name","placeholder","Template Name",3,"ngModelChange","ngModel"],["size","5"],["size","small","color","primary",3,"click"],[4,"ngIf","ngIfElse"],["name","component_id","label","Component",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["name","amount_type","label","Type",3,"ngModelChange","ngModel"],["value","fixed"],["value","percentage"],["name","value","label","Value","type","number","placeholder","Value",3,"ngModelChange","ngModel"],["name","sort_order","label","Order","type","number","placeholder","Order",3,"ngModelChange","ngModel"],["color","warning"],["name","employee_id","label","Employee ID","placeholder","Employee ID",3,"ngModelChange","ngModel"],["name","template_id","label","Template",3,"ngModelChange","ngModel"],["name","contract_start_date","label","Start Date","type","date",3,"ngModelChange","ngModel"],["name","contract_end_date","label","End Date","type","date",3,"ngModelChange","ngModel"],["name","period_code","label","Code","placeholder","Code",3,"ngModelChange","ngModel"],["name","period_start","label","Start Date","type","date",3,"ngModelChange","ngModel"],["name","period_end","label","End Date","type","date",3,"ngModelChange","ngModel"],["name","status","label","Status",3,"ngModelChange","ngModel"],["value","open"],["value","processing"],["value","closed"],["value","locked"],["size","small","color","primary",3,"click","disabled"]],template:function(l,o){1&l&&(e.j41(0,"ion-header")(1,"ion-toolbar",1)(2,"ion-title"),e.EFF(3,"Payroll Configuration & Management"),e.k0s()(),e.j41(4,"ion-toolbar")(5,"ion-segment",2),e.mxI("ngModelChange",function(m){return e.DH7(o.tab,m)||(o.tab=m),m}),e.j41(6,"ion-segment-button",3)(7,"ion-label"),e.EFF(8,"Salary Components"),e.k0s()(),e.j41(9,"ion-segment-button",4)(10,"ion-label"),e.EFF(11,"Templates"),e.k0s()(),e.j41(12,"ion-segment-button",5)(13,"ion-label"),e.EFF(14,"Template Builder"),e.k0s()(),e.j41(15,"ion-segment-button",6)(16,"ion-label"),e.EFF(17,"Employee Contracts"),e.k0s()(),e.j41(18,"ion-segment-button",7)(19,"ion-label"),e.EFF(20,"Payroll Periods"),e.k0s()(),e.j41(21,"ion-segment-button",8)(22,"ion-label"),e.EFF(23,"Payslips"),e.k0s()()()()(),e.j41(24,"ion-content",9)(25,"ion-grid",10)(26,"ion-row")(27,"ion-col",11),e.DNE(28,F,42,11,"ion-card",12)(29,j,24,6,"ion-card",12)(30,k,10,2,"ion-card",12)(31,C,29,9,"ion-card",12)(32,T,30,5,"ion-card",12)(33,I,10,2,"ion-card",12),e.k0s()()()()),2&l&&(e.R7$(5),e.R50("ngModel",o.tab),e.R7$(23),e.Y8G("ngIf","components"===o.tab),e.R7$(),e.Y8G("ngIf","templates"===o.tab),e.R7$(),e.Y8G("ngIf","composition"===o.tab),e.R7$(),e.Y8G("ngIf","contracts"===o.tab),e.R7$(),e.Y8G("ngIf","periods"===o.tab),e.R7$(),e.Y8G("ngIf","payslips"===o.tab))},dependencies:[p.MD,p.Sq,p.bT,_.YN,_.qT,_.BC,_.cb,_.vS,_.cV,c.eU,c.ai,c.BC,c.W9,c.Gp,c.eP,c.he,c.b_,c.ME,c.tN,c.I9,c.nf,c.uz,c.Jm,c.In,c.Nm,c.Ip,c.$w,c.lO,c.ln,c.hU],styles:["[_nghost-%COMP%]{display:block}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{margin-top:1.5rem;margin-bottom:1rem}ion-list[_ngcontent-%COMP%]{margin-bottom:2rem}ion-item[_ngcontent-%COMP%]{--padding-start: 0}ion-button[_ngcontent-%COMP%]{margin-left:.5rem}form[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{margin-bottom:.5rem}.loading[_ngcontent-%COMP%]{text-align:center;margin:2rem 0}"]})}}return i})()}}]);