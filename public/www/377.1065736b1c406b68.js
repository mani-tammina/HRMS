"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[377],{377:(F,y,s)=>{s.r(y),s.d(y,{LeaveTypesPage:()=>w});var c=s(467),d=s(177),g=s(4341),r=s(7820),m=s(2951),p=s(5873),e=s(4438),u=s(7097);function f(o,l){if(1&o){const n=e.RV6();e.j41(0,"ion-button",5),e.bIt("click",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.toggleCreateForm())}),e.nrm(1,"ion-icon",11),e.k0s()}}function T(o,l){if(1&o){const n=e.RV6();e.j41(0,"ion-item")(1,"ion-input",20),e.mxI("ngModelChange",function(t){e.eBV(n);const a=e.XpG(2);return e.DH7(a.newType.max_carry_forward_days,t)||(a.newType.max_carry_forward_days=t),e.Njj(t)}),e.k0s()()}if(2&o){const n=e.XpG(2);e.R7$(),e.R50("ngModel",n.newType.max_carry_forward_days)}}function h(o,l){if(1&o){const n=e.RV6();e.j41(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),e.EFF(3,"Create Leave Type"),e.k0s()(),e.j41(4,"ion-card-content")(5,"ion-list")(6,"ion-item")(7,"ion-input",12),e.mxI("ngModelChange",function(t){e.eBV(n);const a=e.XpG();return e.DH7(a.newType.type_name,t)||(a.newType.type_name=t),e.Njj(t)}),e.k0s()(),e.j41(8,"ion-item")(9,"ion-input",13),e.mxI("ngModelChange",function(t){e.eBV(n);const a=e.XpG();return e.DH7(a.newType.type_code,t)||(a.newType.type_code=t),e.Njj(t)}),e.k0s()(),e.j41(10,"ion-item")(11,"ion-textarea",14),e.mxI("ngModelChange",function(t){e.eBV(n);const a=e.XpG();return e.DH7(a.newType.description,t)||(a.newType.description=t),e.Njj(t)}),e.k0s()(),e.j41(12,"ion-item")(13,"ion-toggle",15),e.mxI("ngModelChange",function(t){e.eBV(n);const a=e.XpG();return e.DH7(a.newType.is_paid,t)||(a.newType.is_paid=t),e.Njj(t)}),e.EFF(14," Is Paid Leave "),e.k0s()(),e.j41(15,"ion-item")(16,"ion-toggle",15),e.mxI("ngModelChange",function(t){e.eBV(n);const a=e.XpG();return e.DH7(a.newType.requires_approval,t)||(a.newType.requires_approval=t),e.Njj(t)}),e.EFF(17," Requires Approval "),e.k0s()(),e.j41(18,"ion-item")(19,"ion-toggle",15),e.mxI("ngModelChange",function(t){e.eBV(n);const a=e.XpG();return e.DH7(a.newType.can_carry_forward,t)||(a.newType.can_carry_forward=t),e.Njj(t)}),e.EFF(20," Can Carry Forward "),e.k0s()(),e.DNE(21,T,2,1,"ion-item",8),e.k0s(),e.j41(22,"div",16)(23,"ion-button",17),e.bIt("click",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.createLeaveType())}),e.nrm(24,"ion-icon",18),e.EFF(25," Create "),e.k0s(),e.j41(26,"ion-button",19),e.bIt("click",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.toggleCreateForm())}),e.EFF(27," Cancel "),e.k0s()()()()}if(2&o){const n=e.XpG();e.R7$(7),e.R50("ngModel",n.newType.type_name),e.R7$(2),e.R50("ngModel",n.newType.type_code),e.R7$(2),e.R50("ngModel",n.newType.description),e.R7$(2),e.R50("ngModel",n.newType.is_paid),e.R7$(3),e.R50("ngModel",n.newType.requires_approval),e.R7$(3),e.R50("ngModel",n.newType.can_carry_forward),e.R7$(2),e.Y8G("ngIf",n.newType.can_carry_forward)}}function v(o,l){if(1&o&&(e.j41(0,"p"),e.EFF(1),e.k0s()),2&o){const n=e.XpG().$implicit;e.R7$(),e.JRh(n.description)}}function C(o,l){if(1&o&&(e.j41(0,"ion-badge",29),e.EFF(1),e.k0s()),2&o){const n=e.XpG().$implicit;e.R7$(),e.SpI(" Carry Forward: ",n.max_carry_forward_days," days ")}}function P(o,l){1&o&&(e.j41(0,"ion-badge",30),e.EFF(1," Requires Approval "),e.k0s())}function L(o,l){if(1&o){const n=e.RV6();e.j41(0,"ion-item",22)(1,"ion-label")(2,"h2"),e.EFF(3),e.k0s(),e.DNE(4,v,2,1,"p",8),e.j41(5,"p")(6,"ion-badge",23),e.EFF(7),e.k0s(),e.j41(8,"ion-badge",24),e.EFF(9),e.k0s(),e.DNE(10,C,2,1,"ion-badge",25)(11,P,2,0,"ion-badge",26),e.k0s()(),e.j41(12,"ion-button",27),e.bIt("click",function(){const t=e.eBV(n).$implicit,a=e.XpG(2);return e.Njj(a.editLeaveType(t))}),e.nrm(13,"ion-icon",28),e.k0s()()}if(2&o){const n=l.$implicit;e.R7$(3),e.JRh(n.type_name),e.R7$(),e.Y8G("ngIf",n.description),e.R7$(2),e.Y8G("color",n.is_paid?"success":"warning"),e.R7$(),e.SpI(" ",n.is_paid?"Paid":"Unpaid"," "),e.R7$(2),e.SpI(" ",n.type_code," "),e.R7$(),e.Y8G("ngIf",n.can_carry_forward),e.R7$(),e.Y8G("ngIf",n.requires_approval)}}function M(o,l){if(1&o&&(e.j41(0,"ion-list"),e.DNE(1,L,14,7,"ion-item",21),e.k0s()),2&o){const n=e.XpG();e.R7$(),e.Y8G("ngForOf",n.leaveTypes)}}function x(o,l){if(1&o){const n=e.RV6();e.j41(0,"div",31),e.nrm(1,"ion-icon",32),e.j41(2,"h2"),e.EFF(3,"No Leave Types"),e.k0s(),e.j41(4,"p"),e.EFF(5,"Create your first leave type"),e.k0s(),e.j41(6,"ion-button",5),e.bIt("click",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.toggleCreateForm())}),e.nrm(7,"ion-icon",33),e.EFF(8," Create Leave Type "),e.k0s()()}}function b(o,l){1&o&&(e.j41(0,"div",34),e.nrm(1,"ion-spinner",35),e.j41(2,"p"),e.EFF(3,"Loading leave types..."),e.k0s()())}let w=(()=>{class o{constructor(n,i,t){this.leavePlanService=n,this.alertController=i,this.toastController=t,this.leaveTypes=[],this.isLoading=!1,this.showCreateForm=!1,this.newType={type_name:"",type_code:"",description:"",is_paid:1,requires_approval:1,can_carry_forward:0,max_carry_forward_days:0},(0,m.d)({addOutline:p.EKF,createOutline:p.hmR,checkmarkCircleOutline:p.gz2,closeCircleOutline:p.p9N,refreshOutline:p.mVv})}ngOnInit(){this.loadLeaveTypes()}loadLeaveTypes(){console.log("=== Loading leave types ==="),this.isLoading=!0,this.leavePlanService.getLeaveTypes().subscribe({next:n=>{console.log("Leave types response:",n),console.log("Number of types:",n?.length||0),this.leaveTypes=n,this.isLoading=!1},error:n=>{console.error("Error loading leave types:",n),this.showToast("Error loading leave types","danger"),this.isLoading=!1}})}handleRefresh(n){this.loadLeaveTypes(),setTimeout(()=>n.target.complete(),1e3)}toggleCreateForm(){this.showCreateForm=!this.showCreateForm,this.showCreateForm||this.resetForm()}resetForm(){this.newType={type_name:"",type_code:"",description:"",is_paid:1,requires_approval:1,can_carry_forward:0,max_carry_forward_days:0}}createLeaveType(){var n=this;return(0,c.A)(function*(){n.newType.type_name&&n.newType.type_code?(yield n.confirmAction("Create Leave Type",`Create "${n.newType.type_name}" leave type?`))&&n.leavePlanService.createLeaveType(n.newType).subscribe({next:()=>{n.showToast("Leave type created successfully","success"),n.toggleCreateForm(),n.loadLeaveTypes()},error:t=>{console.error("Error creating leave type:",t),n.showToast("Error creating leave type","danger")}}):n.showToast("Name and code are required","warning")})()}editLeaveType(n){var i=this;return(0,c.A)(function*(){yield(yield i.alertController.create({header:"Edit Leave Type",inputs:[{name:"type_name",type:"text",placeholder:"Leave Type Name",value:n.type_name},{name:"description",type:"textarea",placeholder:"Description",value:n.description},{name:"max_carry_forward_days",type:"number",placeholder:"Max Carry Forward Days",value:n.max_carry_forward_days}],buttons:[{text:"Cancel",role:"cancel"},{text:"Update",handler:a=>{i.updateLeaveType(n.id,a)}}]})).present()})()}updateLeaveType(n,i){this.leavePlanService.updateLeaveType(n,i).subscribe({next:()=>{this.showToast("Leave type updated successfully","success"),this.loadLeaveTypes()},error:t=>{console.error("Error updating leave type:",t),this.showToast("Error updating leave type","danger")}})}confirmAction(n,i){var t=this;return(0,c.A)(function*(){return new Promise(function(){var a=(0,c.A)(function*(_){yield(yield t.alertController.create({header:n,message:i,buttons:[{text:"Cancel",role:"cancel",handler:()=>_(!1)},{text:"Confirm",handler:()=>_(!0)}]})).present()});return function(_){return a.apply(this,arguments)}}())})()}showToast(n){var i=this;return(0,c.A)(function*(t,a="primary"){yield(yield i.toastController.create({message:t,duration:2e3,color:a,position:"top"})).present()}).apply(this,arguments)}static{this.\u0275fac=function(i){return new(i||o)(e.rXU(u.c),e.rXU(r.hG),e.rXU(r.K_))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-leave-types"]],standalone:!0,features:[e.aNF],decls:17,vars:5,consts:[["color","primary"],["slot","start"],["defaultHref","/admin/leave-plans"],["slot","end"],[3,"click",4,"ngIf"],[3,"click"],["slot","icon-only","name","refresh-outline"],["slot","fixed",3,"ionRefresh"],[4,"ngIf"],["class","empty-state",4,"ngIf"],["class","loading-state",4,"ngIf"],["slot","icon-only","name","add-outline"],["label","Type Name *","labelPlacement","stacked","placeholder","e.g., Casual Leave",3,"ngModelChange","ngModel"],["label","Type Code *","labelPlacement","stacked","placeholder","e.g., CL",3,"ngModelChange","ngModel"],["label","Description","labelPlacement","stacked","rows","3","placeholder","Leave type description",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],[1,"button-group"],["expand","block","color","primary",3,"click"],["slot","start","name","checkmark-circle-outline"],["expand","block","fill","outline",3,"click"],["label","Max Carry Forward Days","labelPlacement","stacked","type","number","min","0","placeholder","0",3,"ngModelChange","ngModel"],["lines","full",4,"ngFor","ngForOf"],["lines","full"],[3,"color"],["color","primary",2,"margin-left","4px"],["color","secondary","style","margin-left: 4px;",4,"ngIf"],["color","tertiary","style","margin-left: 4px;",4,"ngIf"],["slot","end","fill","clear","size","small",3,"click"],["slot","icon-only","name","create-outline"],["color","secondary",2,"margin-left","4px"],["color","tertiary",2,"margin-left","4px"],[1,"empty-state"],["name","close-circle-outline","color","medium"],["slot","start","name","add-outline"],[1,"loading-state"],["name","crescent","color","primary"]],template:function(i,t){1&i&&(e.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),e.nrm(3,"ion-back-button",2),e.k0s(),e.j41(4,"ion-title"),e.EFF(5,"Leave Types"),e.k0s(),e.j41(6,"ion-buttons",3),e.DNE(7,f,2,0,"ion-button",4),e.j41(8,"ion-button",5),e.bIt("click",function(){return t.loadLeaveTypes()}),e.nrm(9,"ion-icon",6),e.k0s()()()(),e.j41(10,"ion-content")(11,"ion-refresher",7),e.bIt("ionRefresh",function(_){return t.handleRefresh(_)}),e.nrm(12,"ion-refresher-content"),e.k0s(),e.DNE(13,h,28,7,"ion-card",8)(14,M,2,1,"ion-list",8)(15,x,9,0,"div",9)(16,b,4,0,"div",10),e.k0s()),2&i&&(e.R7$(7),e.Y8G("ngIf",!t.showCreateForm),e.R7$(6),e.Y8G("ngIf",t.showCreateForm),e.R7$(),e.Y8G("ngIf",!t.isLoading&&t.leaveTypes.length>0),e.R7$(),e.Y8G("ngIf",!t.isLoading&&0===t.leaveTypes.length&&!t.showCreateForm),e.R7$(),e.Y8G("ngIf",t.isLoading))},dependencies:[d.MD,d.Sq,d.bT,g.YN,g.BC,g.vS,r.W9,r.eU,r.BC,r.ai,r.QW,r.el,r.b_,r.I9,r.ME,r.tN,r.nf,r.uz,r.he,r.In,r.Jm,r.iq,r.To,r.Ki,r.$w,r.nc,r.BY,r.w2],styles:[".empty-state[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center}.empty-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:80px;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 8px;font-size:20px;font-weight:600}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 16px;color:var(--ion-color-medium)}.empty-state[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{transform:scale(1.5);margin-bottom:20px}.button-group[_ngcontent-%COMP%]{margin-top:16px}.button-group[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-bottom:8px}"]})}}return o})()}}]);