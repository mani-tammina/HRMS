"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[625],{9625:(k,_,i)=>{i.r(_),i.d(_,{AttendancePage:()=>C});var r=i(467),c=i(9907),s=i(177),g=i(2951),u=i(5873),n=i(4438),m=i(1963);function f(a,l){if(1&a&&(n.j41(0,"div",19),n.nrm(1,"ion-icon",20),n.j41(2,"span"),n.EFF(3),n.nI1(4,"number"),n.k0s()()),2&a){const e=n.XpG();n.R7$(3),n.SpI("Work Hours: ",n.i5U(4,1,null==e.todayAttendance?null:e.todayAttendance.total_hours,"1.1-1"),"h")}}function h(a,l){if(1&a&&(n.j41(0,"div",21)(1,"ion-badge",22),n.EFF(2),n.k0s()()),2&a){const e=n.XpG();n.R7$(),n.Y8G("color","Office"===(null==e.todayAttendance?null:e.todayAttendance.work_mode)?"primary":"tertiary"),n.R7$(),n.SpI(" ",null==e.todayAttendance?null:e.todayAttendance.work_mode," ")}}function p(a,l){if(1&a&&(n.j41(0,"p"),n.EFF(1),n.nI1(2,"number"),n.k0s()),2&a){const e=n.XpG().$implicit;n.R7$(),n.SpI("",n.i5U(2,1,e.total_hours,"1.1-1")," hours")}}function O(a,l){if(1&a&&(n.j41(0,"p")(1,"ion-badge",27),n.EFF(2),n.k0s()()),2&a){const e=n.XpG().$implicit;n.R7$(),n.Y8G("color","Office"===e.work_mode?"primary":"tertiary"),n.R7$(),n.SpI(" ",e.work_mode," ")}}function y(a,l){if(1&a&&(n.j41(0,"ion-item",23),n.nrm(1,"ion-icon",24),n.j41(2,"ion-label")(3,"h3"),n.EFF(4),n.nI1(5,"date"),n.k0s(),n.j41(6,"p"),n.EFF(7),n.nI1(8,"date"),n.nI1(9,"date"),n.k0s(),n.DNE(10,p,3,4,"p",25)(11,O,3,2,"p",25),n.k0s(),n.j41(12,"ion-badge",26),n.EFF(13),n.k0s()()),2&a){const e=l.$implicit,o=n.XpG();n.R7$(),n.Y8G("color",o.getStatusColor(e.status)),n.R7$(3),n.JRh(n.i5U(5,8,e.attendance_date,"MMM d, y")),n.R7$(3),n.Lme("",n.i5U(8,11,e.check_in,"shortTime")," - ",e.check_out?n.i5U(9,14,e.check_out,"shortTime"):"Not checked out",""),n.R7$(3),n.Y8G("ngIf",e.total_hours),n.R7$(),n.Y8G("ngIf",e.work_mode),n.R7$(),n.Y8G("color",o.getStatusColor(e.status)),n.R7$(),n.SpI(" ",e.status," ")}}let C=(()=>{class a{constructor(e,o){this.attendanceService=e,this.toastController=o,this.todayAttendance=null,this.recentAttendance=[],this.isLoading=!1,(0,g.d)({logInOutline:u.oPd,logOutOutline:u.z_V,timeOutline:u.CVk,calendarOutline:u.RXF})}ngOnInit(){this.loadData()}loadData(){console.log("Loading attendance data..."),this.attendanceService.getTodayAttendance().subscribe({next:t=>{console.log("Today attendance loaded:",t),this.todayAttendance=t},error:t=>{console.error("Error loading today attendance:",t)}});const e=(new Date).toISOString().split("T")[0],o=new Date(Date.now()-2592e6).toISOString().split("T")[0];console.log("Loading recent attendance from",o,"to",e),this.attendanceService.getAttendance(o,e).subscribe({next:t=>{console.log("Recent attendance loaded:",t),this.recentAttendance=t},error:t=>{console.error("Error loading recent attendance:",t)}})}handleRefresh(e){this.loadData(),setTimeout(()=>e.target.complete(),1e3)}checkIn(){var e=this;return(0,r.A)(function*(){var o;e.isLoading=!0,console.log("Checking in..."),e.attendanceService.checkIn().subscribe({next:(o=(0,r.A)(function*(t){console.log("Check-in response:",t),e.isLoading=!1,yield e.showToast(t.message||"Checked in successfully!","success"),e.loadData()}),function(d){return o.apply(this,arguments)}),error:function(){var o=(0,r.A)(function*(t){console.error("Check-in error:",t),e.isLoading=!1,yield e.showToast(t.error?.error||"Check-in failed","danger")});return function(d){return o.apply(this,arguments)}}()})})()}checkOut(){var e=this;return(0,r.A)(function*(){var o;e.isLoading=!0,console.log("Checking out..."),e.attendanceService.checkOut().subscribe({next:(o=(0,r.A)(function*(t){console.log("Check-out response:",t),e.isLoading=!1,yield e.showToast(t.message||"Checked out successfully!","success"),e.loadData()}),function(d){return o.apply(this,arguments)}),error:function(){var o=(0,r.A)(function*(t){console.error("Check-out error:",t),e.isLoading=!1,yield e.showToast(t.error?.error||"Check-out failed","danger")});return function(d){return o.apply(this,arguments)}}()})})()}getStatusColor(e){return{present:"success",late:"warning",absent:"danger","half-day":"medium"}[e]||"medium"}showToast(e,o){var t=this;return(0,r.A)(function*(){(yield t.toastController.create({message:e,duration:3e3,color:o,position:"top"})).present()})()}static{this.\u0275fac=function(o){return new(o||a)(n.rXU(m.$),n.rXU(c.K_))}}static{this.\u0275cmp=n.VBU({type:a,selectors:[["app-attendance"]],standalone:!0,features:[n.aNF],decls:45,vars:14,consts:[[3,"fullscreen"],["slot","fixed",3,"ionRefresh"],[1,"attendance-container"],[1,"today-attendance-card"],[1,"attendance-info"],[1,"time-info"],["name","log-in-outline","color","success"],[1,"label"],[1,"time"],["name","log-out-outline","color","danger"],[1,"action-buttons"],["expand","block",3,"click","disabled"],["slot","start","name","log-in-outline"],["expand","block","color","danger",3,"click","disabled"],["slot","start","name","log-out-outline"],["class","work-hours",4,"ngIf"],["class","work-mode",4,"ngIf"],[1,"section-title"],["lines","full",4,"ngFor","ngForOf"],[1,"work-hours"],["name","time-outline","color","primary"],[1,"work-mode"],[3,"color"],["lines","full"],["slot","start","name","calendar-outline",3,"color"],[4,"ngIf"],["slot","end",3,"color"],[2,"font-size","0.7rem",3,"color"]],template:function(o,t){1&o&&(n.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),n.EFF(3,"Attendance Tracking"),n.k0s()()(),n.j41(4,"ion-content",0)(5,"ion-refresher",1),n.bIt("ionRefresh",function(P){return t.handleRefresh(P)}),n.nrm(6,"ion-refresher-content"),n.k0s(),n.j41(7,"div",2)(8,"ion-card",3)(9,"ion-card-header")(10,"ion-card-title"),n.EFF(11,"Today's Attendance"),n.k0s()(),n.j41(12,"ion-card-content")(13,"div",4)(14,"div",5),n.nrm(15,"ion-icon",6),n.j41(16,"div")(17,"p",7),n.EFF(18,"Check In"),n.k0s(),n.j41(19,"p",8),n.EFF(20),n.nI1(21,"date"),n.k0s()()(),n.j41(22,"div",5),n.nrm(23,"ion-icon",9),n.j41(24,"div")(25,"p",7),n.EFF(26,"Check Out"),n.k0s(),n.j41(27,"p",8),n.EFF(28),n.nI1(29,"date"),n.k0s()()()(),n.j41(30,"div",10)(31,"ion-button",11),n.bIt("click",function(){return t.checkIn()}),n.nrm(32,"ion-icon",12),n.EFF(33," Check In "),n.k0s(),n.j41(34,"ion-button",13),n.bIt("click",function(){return t.checkOut()}),n.nrm(35,"ion-icon",14),n.EFF(36," Check Out "),n.k0s()(),n.DNE(37,f,5,4,"div",15)(38,h,3,2,"div",16),n.k0s()(),n.j41(39,"div",17)(40,"h2"),n.EFF(41,"Recent Attendance"),n.k0s()(),n.j41(42,"ion-card")(43,"ion-list"),n.DNE(44,y,14,17,"ion-item",18),n.k0s()()()()),2&o&&(n.R7$(4),n.Y8G("fullscreen",!0),n.R7$(16),n.JRh(null!=t.todayAttendance&&t.todayAttendance.check_in?n.i5U(21,8,null==t.todayAttendance?null:t.todayAttendance.check_in,"shortTime"):"--:--"),n.R7$(8),n.JRh(null!=t.todayAttendance&&t.todayAttendance.check_out?n.i5U(29,11,null==t.todayAttendance?null:t.todayAttendance.check_out,"shortTime"):"--:--"),n.R7$(3),n.Y8G("disabled",t.isLoading||"in"===(null==t.todayAttendance?null:t.todayAttendance.last_punch_type)),n.R7$(3),n.Y8G("disabled",t.isLoading||!(null!=t.todayAttendance&&t.todayAttendance.check_in)||"out"===(null==t.todayAttendance?null:t.todayAttendance.last_punch_type)),n.R7$(3),n.Y8G("ngIf",null==t.todayAttendance?null:t.todayAttendance.total_hours),n.R7$(),n.Y8G("ngIf",null==t.todayAttendance?null:t.todayAttendance.work_mode),n.R7$(6),n.Y8G("ngForOf",t.recentAttendance))},dependencies:[s.MD,s.Sq,s.bT,s.QX,s.vh,c.W9,c.eU,c.BC,c.ai,c.b_,c.I9,c.ME,c.tN,c.Jm,c.iq,c.nf,c.uz,c.he,c.In,c.To,c.Ki],styles:[".attendance-container[_ngcontent-%COMP%]{padding:1rem;max-width:1200px;margin:0 auto}.today-attendance-card[_ngcontent-%COMP%]{background:var(--gradient-primary);color:#fff}.today-attendance-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{color:#fff}.today-attendance-card[_ngcontent-%COMP%]   .attendance-info[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-bottom:1.5rem}.today-attendance-card[_ngcontent-%COMP%]   .attendance-info[_ngcontent-%COMP%]   .time-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.today-attendance-card[_ngcontent-%COMP%]   .attendance-info[_ngcontent-%COMP%]   .time-info[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:2rem}.today-attendance-card[_ngcontent-%COMP%]   .attendance-info[_ngcontent-%COMP%]   .time-info[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.8rem;color:var(--ion-color-medium);margin:0 0 .25rem}.today-attendance-card[_ngcontent-%COMP%]   .attendance-info[_ngcontent-%COMP%]   .time-info[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;margin:0}.today-attendance-card[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1rem}.today-attendance-card[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{flex:1}.today-attendance-card[_ngcontent-%COMP%]   .work-hours[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem;padding:1rem;background:var(--ion-color-light);border-radius:8px}.today-attendance-card[_ngcontent-%COMP%]   .work-hours[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.5rem}.today-attendance-card[_ngcontent-%COMP%]   .work-hours[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600;color:var(--ion-color-primary)}.today-attendance-card[_ngcontent-%COMP%]   .work-mode[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:.5rem}.today-attendance-card[_ngcontent-%COMP%]   .work-mode[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{padding:.5rem 1rem;font-size:.9rem}.section-title[_ngcontent-%COMP%]{margin:1.5rem 0 1rem}.section-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;margin:0}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:600;margin-bottom:.25rem}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.85rem;color:var(--ion-color-medium)}"]})}}return a})()}}]);