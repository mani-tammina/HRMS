"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[901],{3901:(C,u,l)=>{l.r(u),l.d(u,{ProfilePage:()=>b});var _=l(467),o=l(9907),m=l(177),p=l(5312),g=l(2951),a=l(5873),e=l(4438),d=l(8010),f=l(1626),h=l(3799);function P(t,r){1&t&&(e.j41(0,"div",4),e.nrm(1,"ion-spinner",5),e.j41(2,"p"),e.EFF(3,"Loading profile..."),e.k0s()())}function E(t,r){if(1&t&&(e.j41(0,"ion-item"),e.nrm(1,"ion-icon",16),e.j41(2,"ion-label")(3,"p"),e.EFF(4,"Employee Number"),e.k0s(),e.j41(5,"h3"),e.EFF(6),e.k0s()()()),2&t){const n=e.XpG(2);e.R7$(6),e.JRh(null==n.employeeData?null:n.employeeData.EmployeeNumber)}}function y(t,r){if(1&t&&(e.j41(0,"ion-item"),e.nrm(1,"ion-icon",17),e.j41(2,"ion-label")(3,"p"),e.EFF(4,"Phone Number"),e.k0s(),e.j41(5,"h3"),e.EFF(6),e.k0s()()()),2&t){const n=e.XpG(2);e.R7$(6),e.JRh(null==n.employeeData?null:n.employeeData.PhoneNumber)}}function O(t,r){if(1&t&&(e.j41(0,"ion-item"),e.nrm(1,"ion-icon",18),e.j41(2,"ion-label")(3,"p"),e.EFF(4,"Department"),e.k0s(),e.j41(5,"h3"),e.EFF(6),e.k0s()()()),2&t){const n=e.XpG(2);e.R7$(6),e.JRh(null==n.employeeData?null:n.employeeData.department_name)}}function D(t,r){if(1&t&&(e.j41(0,"ion-item"),e.nrm(1,"ion-icon",19),e.j41(2,"ion-label")(3,"p"),e.EFF(4,"Designation"),e.k0s(),e.j41(5,"h3"),e.EFF(6),e.k0s()()()),2&t){const n=e.XpG(2);e.R7$(6),e.JRh(null==n.employeeData?null:n.employeeData.designation_name)}}function v(t,r){if(1&t&&(e.j41(0,"ion-item"),e.nrm(1,"ion-icon",20),e.j41(2,"ion-label")(3,"p"),e.EFF(4,"Location"),e.k0s(),e.j41(5,"h3"),e.EFF(6),e.k0s()()()),2&t){const n=e.XpG(2);e.R7$(6),e.JRh(null==n.employeeData?null:n.employeeData.location_name)}}function F(t,r){if(1&t&&(e.j41(0,"ion-item"),e.nrm(1,"ion-icon",21),e.j41(2,"ion-label")(3,"p"),e.EFF(4,"Role"),e.k0s(),e.j41(5,"h3"),e.EFF(6),e.nI1(7,"titlecase"),e.k0s()()()),2&t){const n=e.XpG(2);e.R7$(6),e.JRh(e.bMT(7,1,null==n.user?null:n.user.role))}}function R(t,r){if(1&t){const n=e.RV6();e.j41(0,"ion-item",22),e.bIt("click",function(){const s=e.eBV(n).$implicit,c=e.XpG(2);return e.Njj(c.handleMenuClick(s.action))}),e.nrm(1,"ion-icon",23),e.j41(2,"ion-label",11),e.EFF(3),e.k0s()()}if(2&t){const n=r.$implicit;e.R7$(),e.Y8G("name",n.icon)("color",n.color||"primary"),e.R7$(),e.Y8G("color",n.color),e.R7$(),e.JRh(n.label)}}function M(t,r){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"ion-card",6)(2,"div",7)(3,"ion-avatar",8)(4,"img",9),e.bIt("error",function(s){e.eBV(n);const c=e.XpG();return e.Njj(c.handleImageError(s))}),e.k0s()()(),e.j41(5,"div",10)(6,"h1"),e.EFF(7),e.k0s(),e.j41(8,"p"),e.EFF(9),e.k0s(),e.j41(10,"ion-badge",11),e.EFF(11),e.k0s()()(),e.j41(12,"ion-card")(13,"ion-card-content")(14,"ion-list",12)(15,"ion-item"),e.nrm(16,"ion-icon",13),e.j41(17,"ion-label")(18,"p"),e.EFF(19,"Full Name"),e.k0s(),e.j41(20,"h3"),e.EFF(21),e.k0s()()(),e.DNE(22,E,7,1,"ion-item",3),e.j41(23,"ion-item"),e.nrm(24,"ion-icon",14),e.j41(25,"ion-label")(26,"p"),e.EFF(27,"Email"),e.k0s(),e.j41(28,"h3"),e.EFF(29),e.k0s()()(),e.DNE(30,y,7,1,"ion-item",3)(31,O,7,1,"ion-item",3)(32,D,7,1,"ion-item",3)(33,v,7,1,"ion-item",3)(34,F,8,3,"ion-item",3),e.k0s()()(),e.j41(35,"ion-card")(36,"ion-card-content")(37,"ion-list"),e.DNE(38,R,4,4,"ion-item",15),e.k0s()()()()}if(2&t){const n=e.XpG();e.R7$(4),e.Y8G("src",(null==n.user?null:n.user.avatar)||"assets/avatar-placeholder.png",e.B4B),e.R7$(3),e.JRh((null==n.employeeData?null:n.employeeData.FullName)||(null==n.user?null:n.user.name)),e.R7$(2),e.JRh((null==n.employeeData?null:n.employeeData.WorkEmail)||(null==n.user?null:n.user.email)),e.R7$(),e.Y8G("color","Active"===(null==n.employeeData?null:n.employeeData.EmploymentStatus)?"success":"medium"),e.R7$(),e.SpI(" ",(null==n.employeeData?null:n.employeeData.EmploymentStatus)||"Active"," "),e.R7$(10),e.JRh((null==n.employeeData?null:n.employeeData.FullName)||(null==n.user?null:n.user.name)),e.R7$(),e.Y8G("ngIf",null==n.employeeData?null:n.employeeData.EmployeeNumber),e.R7$(7),e.JRh((null==n.employeeData?null:n.employeeData.WorkEmail)||(null==n.user?null:n.user.email)),e.R7$(),e.Y8G("ngIf",null==n.employeeData?null:n.employeeData.PhoneNumber),e.R7$(),e.Y8G("ngIf",null==n.employeeData?null:n.employeeData.department_name),e.R7$(),e.Y8G("ngIf",null==n.employeeData?null:n.employeeData.designation_name),e.R7$(),e.Y8G("ngIf",null==n.employeeData?null:n.employeeData.location_name),e.R7$(),e.Y8G("ngIf",null==n.user?null:n.user.role),e.R7$(4),e.Y8G("ngForOf",n.menuItems)}}let b=(()=>{class t{constructor(n,i,s,c){this.authService=n,this.http=i,this.router=s,this.alertController=c,this.user=null,this.employeeData=null,this.isLoading=!0,this.menuItems=[{icon:"person-outline",label:"Edit Profile",action:"edit-profile"},{icon:"settings-outline",label:"Settings",action:"settings"},{icon:"notifications-outline",label:"Notifications",action:"notifications"},{icon:"log-out-outline",label:"Logout",action:"logout",color:"danger"}],(0,g.d)({personOutline:a.wAZ,mailOutline:a.SM1,callOutline:a.bNN,businessOutline:a.FL4,briefcaseOutline:a.vOb,calendarOutline:a.RXF,logOutOutline:a.z_V,settingsOutline:a.s8q,notificationsOutline:a.rqk,cardOutline:a.VR9,locationOutline:a.UN$,shieldOutline:a.uLY})}ngOnInit(){this.userSubscription=this.authService.currentUser$.subscribe(n=>{this.user=n,n&&this.loadEmployeeProfile()})}ngOnDestroy(){this.userSubscription&&this.userSubscription.unsubscribe()}loadEmployeeProfile(){this.isLoading=!0,this.http.get(`${p.c.apiUrl}/employees/profile/me`).subscribe({next:n=>{this.employeeData=n,this.isLoading=!1},error:n=>{console.error("Error loading profile:",n),this.isLoading=!1}})}handleMenuClick(n){var i=this;return(0,_.A)(function*(){"logout"===n?yield i.confirmLogout():"notifications"===n?i.router.navigate(["/notifications"]):console.log("Action:",n)})()}confirmLogout(){var n=this;return(0,_.A)(function*(){yield(yield n.alertController.create({header:"Confirm Logout",message:"Are you sure you want to logout?",buttons:[{text:"Cancel",role:"cancel"},{text:"Logout",handler:()=>{n.authService.logout()}}]})).present()})()}handleImageError(n){n.target.src="assets/avatar-placeholder.png"}static{this.\u0275fac=function(i){return new(i||t)(e.rXU(d.u),e.rXU(f.Qq),e.rXU(h.Ix),e.rXU(o.hG))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-profile"]],standalone:!0,features:[e.aNF],decls:8,vars:3,consts:[[3,"fullscreen"],[1,"profile-container"],["class","loading-container",4,"ngIf"],[4,"ngIf"],[1,"loading-container"],["name","crescent"],[1,"profile-header-card"],[1,"header-gradient"],[1,"profile-avatar"],["alt","Profile",3,"error","src"],[1,"profile-info"],[3,"color"],["lines","none"],["slot","start","name","person-outline","color","primary"],["slot","start","name","mail-outline","color","primary"],["button","","detail","true",3,"click",4,"ngFor","ngForOf"],["slot","start","name","card-outline","color","primary"],["slot","start","name","call-outline","color","primary"],["slot","start","name","business-outline","color","primary"],["slot","start","name","briefcase-outline","color","primary"],["slot","start","name","location-outline","color","primary"],["slot","start","name","shield-outline","color","primary"],["button","","detail","true",3,"click"],["slot","start",3,"name","color"]],template:function(i,s){1&i&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Profile"),e.k0s()()(),e.j41(4,"ion-content",0)(5,"div",1),e.DNE(6,P,4,0,"div",2)(7,M,39,14,"div",3),e.k0s()()),2&i&&(e.R7$(4),e.Y8G("fullscreen",!0),e.R7$(2),e.Y8G("ngIf",s.isLoading),e.R7$(),e.Y8G("ngIf",!s.isLoading))},dependencies:[m.MD,m.Sq,m.bT,m.PV,o.W9,o.eU,o.BC,o.ai,o.b_,o.I9,o.nf,o.uz,o.he,o.iq,o.mC,o.In,o.w2],styles:[".profile-container[_ngcontent-%COMP%]{padding:1rem;max-width:800px;margin:0 auto}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:60vh}.loading-container[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{transform:scale(1.5);margin-bottom:1rem}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--ion-color-medium);font-size:.9rem}.profile-header-card[_ngcontent-%COMP%]{margin-bottom:1.5rem;overflow:hidden}.profile-header-card[_ngcontent-%COMP%]   .header-gradient[_ngcontent-%COMP%]{background:var(--gradient-primary);height:120px;display:flex;align-items:flex-end;justify-content:center;padding-bottom:50px}.profile-header-card[_ngcontent-%COMP%]   .profile-avatar[_ngcontent-%COMP%]{width:100px;height:100px;border:4px solid white;box-shadow:var(--shadow-md)}.profile-header-card[_ngcontent-%COMP%]   .profile-info[_ngcontent-%COMP%]{text-align:center;padding:50px 1rem 1rem;margin-top:-50px}.profile-header-card[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;margin:0 0 .5rem}.profile-header-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--ion-color-medium);margin:0}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start: 0;margin-bottom:.5rem}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.8rem;color:var(--ion-color-medium);margin-bottom:.25rem}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:600;margin:0}"]})}}return t})()}}]);