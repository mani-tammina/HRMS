"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8339],{8339:(T,p,c)=>{c.r(p),c.d(p,{ProjectsPage:()=>R});var g=c(467),m=c(177),d=c(4341),o=c(7820),P=c(2951),_=c(5873),j=c(6233),e=c(4438),h=c(7326),C=c(3799),f=c(6119);const u=(n,l)=>l.id;function M(n,l){1&n&&e.nrm(0,"app-loading",12)}function O(n,l){if(1&n&&(e.j41(0,"ion-card")(1,"ion-card-content",17),e.nrm(2,"ion-icon",18),e.j41(3,"h3"),e.EFF(4,"No Projects Found"),e.k0s(),e.j41(5,"p"),e.EFF(6),e.k0s()()()),2&n){const t=e.XpG(2);e.R7$(6),e.JRh(t.searchTerm?"Try adjusting your search":"Click the + button to create a new project")}}function v(n,l){if(1&n&&(e.j41(0,"p",29),e.EFF(1),e.k0s()),2&n){const t=e.XpG().$implicit;e.R7$(),e.JRh(t.description)}}function E(n,l){if(1&n&&(e.j41(0,"div",34),e.nrm(1,"ion-icon",35),e.j41(2,"span"),e.EFF(3),e.k0s()()),2&n){const t=e.XpG().$implicit;e.R7$(3),e.SpI("Manager: ",t.manager_name,"")}}function b(n,l){if(1&n){const t=e.RV6();e.j41(0,"ion-card",20),e.bIt("click",function(){const r=e.eBV(t).$implicit,s=e.XpG(3);return e.Njj(s.viewProject(r.id))}),e.j41(1,"ion-card-header")(2,"div",21)(3,"div",22)(4,"ion-card-title"),e.EFF(5),e.k0s(),e.j41(6,"div",23)(7,"span",24),e.EFF(8),e.k0s(),e.j41(9,"span",25),e.EFF(10,"\u2022"),e.k0s(),e.j41(11,"span",26),e.EFF(12),e.k0s()()(),e.j41(13,"ion-badge",27),e.nrm(14,"ion-icon",28),e.EFF(15),e.k0s()()(),e.j41(16,"ion-card-content"),e.DNE(17,v,2,1,"p",29),e.j41(18,"div",30)(19,"div",31),e.nrm(20,"ion-icon",32),e.j41(21,"span"),e.EFF(22),e.k0s()(),e.j41(23,"div",31),e.nrm(24,"ion-icon",33),e.j41(25,"span"),e.EFF(26),e.k0s()()(),e.DNE(27,E,4,1,"div",34),e.k0s()()}if(2&n){const t=l.$implicit,i=e.XpG(3);e.R7$(5),e.JRh(t.project_name),e.R7$(3),e.JRh(t.project_code),e.R7$(4),e.JRh(t.client_name),e.R7$(),e.Y8G("color",i.getStatusColor(t.status)),e.R7$(),e.Y8G("name",i.getStatusIcon(t.status)),e.R7$(),e.SpI(" ",i.getStatusLabel(t.status)," "),e.R7$(2),e.vxM(t.description?17:-1),e.R7$(5),e.SpI("",t.total_employees||0," employees"),e.R7$(4),e.Lme("",i.formatDate(t.start_date)," - ",i.formatDate(t.end_date),""),e.R7$(),e.vxM(t.manager_name?27:-1)}}function F(n,l){if(1&n&&e.Z7z(0,b,28,11,"ion-card",19,u),2&n){const t=e.XpG(2);e.Dyx(t.filteredProjects)}}function x(n,l){if(1&n&&e.DNE(0,O,7,1,"ion-card")(1,F,2,0),2&n){const t=e.XpG();e.vxM(0===t.filteredProjects.length?0:1)}}let R=(()=>{class n{constructor(t,i,r,s,a){this.projectsService=t,this.router=i,this.errorHandler=r,this.toastController=s,this.loadingController=a,this.projects=[],this.filteredProjects=[],this.isLoading=!1,this.searchTerm="",this.filterStatus="all",(0,P.d)({addOutline:_.EKF,briefcaseOutline:_.vOb,peopleOutline:_.wx_,timeOutline:_.CVk,checkmarkCircleOutline:_.gz2,pauseCircleOutline:_.FwY,closeCircleOutline:_.p9N,searchOutline:_.jBE})}ngOnInit(){this.loadProjects()}ionViewWillEnter(){this.loadProjects()}loadProjects(){var r,t=this;this.isLoading=!0,this.projectsService.getProjects("all"!==this.filterStatus?this.filterStatus:void 0).subscribe({next:r=>{this.projects=r.projects,this.filterProjects(),this.isLoading=!1},error:(r=(0,g.A)(function*(s){yield t.errorHandler.handleError(s,"Failed to load projects"),t.isLoading=!1}),function(a){return r.apply(this,arguments)})})}handleRefresh(t){this.loadProjects(),setTimeout(()=>t.target.complete(),1e3)}onSearchChange(t){this.searchTerm=t.target.value?.toLowerCase()||"",this.filterProjects()}onFilterChange(t){this.filterStatus=t.detail.value,this.loadProjects()}filterProjects(){this.filteredProjects=this.searchTerm?this.projects.filter(t=>t.project_name.toLowerCase().includes(this.searchTerm)||t.project_code.toLowerCase().includes(this.searchTerm)||t.client_name.toLowerCase().includes(this.searchTerm)):this.projects}viewProject(t){this.router.navigate(["/admin/projects",t])}addProject(){this.router.navigate(["/admin/projects/new"])}getStatusColor(t){return{active:"success",completed:"primary",on_hold:"warning",cancelled:"danger"}[t]||"medium"}getStatusIcon(t){return{active:"checkmark-circle-outline",completed:"checkmark-circle-outline",on_hold:"pause-circle-outline",cancelled:"close-circle-outline"}[t]||"briefcase-outline"}getStatusLabel(t){return{active:"Active",completed:"Completed",on_hold:"On Hold",cancelled:"Cancelled"}[t]||t}formatDate(t){return t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Ongoing"}static{this.\u0275fac=function(i){return new(i||n)(e.rXU(h.i),e.rXU(C.Ix),e.rXU(f.c),e.rXU(o.K_),e.rXU(o.Xi))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-projects"]],standalone:!0,features:[e.aNF],decls:30,vars:4,consts:[["slot","start"],["defaultHref","/admin"],[1,"page-container"],[1,"filter-card"],[1,"filter-controls"],["placeholder","Search projects...","debounce","300",3,"ngModelChange","ionInput","ngModel"],["placeholder","Filter by Status","interface","popover",3,"ngModelChange","ionChange","ngModel"],["value","all"],["value","active"],["value","completed"],["value","on_hold"],["value","cancelled"],["message","Loading projects...","type","spinner"],["slot","fixed",3,"ionRefresh"],["slot","fixed","vertical","bottom","horizontal","end"],[3,"click"],["name","add-outline"],[1,"empty-state"],["name","briefcase-outline","size","large"],[1,"project-card"],[1,"project-card",3,"click"],[1,"project-header"],[1,"project-info"],[1,"project-meta"],[1,"project-code"],[1,"separator"],[1,"client-name"],[3,"color"],[3,"name"],[1,"project-description"],[1,"project-stats"],[1,"stat-item"],["name","people-outline"],["name","time-outline"],[1,"manager-info"],["name","person-outline"]],template:function(i,r){1&i&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),e.nrm(3,"ion-back-button",1),e.k0s(),e.j41(4,"ion-title"),e.EFF(5,"Projects"),e.k0s()()(),e.j41(6,"ion-content")(7,"div",2)(8,"ion-card",3)(9,"ion-card-content")(10,"div",4)(11,"ion-searchbar",5),e.mxI("ngModelChange",function(a){return e.DH7(r.searchTerm,a)||(r.searchTerm=a),a}),e.bIt("ionInput",function(a){return r.onSearchChange(a)}),e.k0s(),e.j41(12,"ion-select",6),e.mxI("ngModelChange",function(a){return e.DH7(r.filterStatus,a)||(r.filterStatus=a),a}),e.bIt("ionChange",function(a){return r.onFilterChange(a)}),e.j41(13,"ion-select-option",7),e.EFF(14,"All Projects"),e.k0s(),e.j41(15,"ion-select-option",8),e.EFF(16,"Active"),e.k0s(),e.j41(17,"ion-select-option",9),e.EFF(18,"Completed"),e.k0s(),e.j41(19,"ion-select-option",10),e.EFF(20,"On Hold"),e.k0s(),e.j41(21,"ion-select-option",11),e.EFF(22,"Cancelled"),e.k0s()()()()(),e.DNE(23,M,1,0,"app-loading",12)(24,x,2,1),e.j41(25,"ion-refresher",13),e.bIt("ionRefresh",function(a){return r.handleRefresh(a)}),e.nrm(26,"ion-refresher-content"),e.k0s(),e.j41(27,"ion-fab",14)(28,"ion-fab-button",15),e.bIt("click",function(){return r.addProject()}),e.nrm(29,"ion-icon",16),e.k0s()()()()),2&i&&(e.R7$(11),e.R50("ngModel",r.searchTerm),e.R7$(),e.R50("ngModel",r.filterStatus),e.R7$(11),e.vxM(r.isLoading?23:-1),e.R7$(),e.vxM(r.isLoading?-1:24))},dependencies:[m.MD,d.YN,d.BC,d.vS,o.W9,o.eU,o.BC,o.ai,o.QW,o.el,o.b_,o.I9,o.ME,o.tN,o.iq,o.In,o.S1,o.Q8,o.YW,o.To,o.Ki,o.Nm,o.Ip,j.q],styles:[".page-container[_ngcontent-%COMP%]{padding:1rem;padding-bottom:80px}.filter-card[_ngcontent-%COMP%]{margin-bottom:1rem}.filter-card[_ngcontent-%COMP%]   .filter-controls[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:center}.filter-card[_ngcontent-%COMP%]   .filter-controls[_ngcontent-%COMP%]   ion-searchbar[_ngcontent-%COMP%]{flex:1;padding:0}.filter-card[_ngcontent-%COMP%]   .filter-controls[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%]{min-width:150px}.project-card[_ngcontent-%COMP%]{cursor:pointer;transition:transform .2s ease,box-shadow .2s ease;margin-bottom:1rem}.project-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-md)}.project-card[_ngcontent-%COMP%]   .project-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:1rem}.project-card[_ngcontent-%COMP%]   .project-header[_ngcontent-%COMP%]   .project-info[_ngcontent-%COMP%]{flex:1}.project-card[_ngcontent-%COMP%]   .project-header[_ngcontent-%COMP%]   .project-info[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{font-size:1.125rem;margin-bottom:.5rem;color:var(--text-primary)}.project-card[_ngcontent-%COMP%]   .project-header[_ngcontent-%COMP%]   .project-info[_ngcontent-%COMP%]   .project-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:.875rem;color:var(--text-secondary)}.project-card[_ngcontent-%COMP%]   .project-header[_ngcontent-%COMP%]   .project-info[_ngcontent-%COMP%]   .project-meta[_ngcontent-%COMP%]   .project-code[_ngcontent-%COMP%]{font-weight:600;color:var(--ion-color-primary)}.project-card[_ngcontent-%COMP%]   .project-header[_ngcontent-%COMP%]   .project-info[_ngcontent-%COMP%]   .project-meta[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{color:var(--ion-color-medium)}.project-card[_ngcontent-%COMP%]   .project-header[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem;padding:.5rem .75rem;white-space:nowrap}.project-card[_ngcontent-%COMP%]   .project-header[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1rem}.project-card[_ngcontent-%COMP%]   .project-description[_ngcontent-%COMP%]{margin:1rem 0;color:var(--text-secondary);font-size:.938rem;line-height:1.5;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.project-card[_ngcontent-%COMP%]   .project-stats[_ngcontent-%COMP%]{display:flex;gap:1.5rem;flex-wrap:wrap;margin-top:1rem;padding-top:1rem;border-top:1px solid var(--border-color)}.project-card[_ngcontent-%COMP%]   .project-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:.875rem;color:var(--text-secondary)}.project-card[_ngcontent-%COMP%]   .project-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.125rem;color:var(--ion-color-primary)}.project-card[_ngcontent-%COMP%]   .manager-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-top:.75rem;padding:.5rem;background:var(--ion-color-light);border-radius:6px;font-size:.875rem;color:var(--text-secondary)}.project-card[_ngcontent-%COMP%]   .manager-info[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1rem;color:var(--ion-color-primary)}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:3rem 1rem}.empty-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:4rem;color:var(--ion-color-medium);margin-bottom:1rem}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:1rem 0 .5rem;color:var(--text-primary);font-weight:600}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);margin:0}ion-fab[_ngcontent-%COMP%]{margin:1rem}"]})}}return n})()}}]);